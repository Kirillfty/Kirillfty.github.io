<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–Ω–æ–ø–æ–ª–∏—è - –ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a472a, #0a3d2e);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }
        
        #app {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            border: 5px solid #e6b325;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .header h1 {
            font-size: 3.5rem;
            color: #e6b325;
            text-shadow: 3px 3px 0 #000;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #ccc;
            font-size: 1.2rem;
        }
        
        .game-container {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1400px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-board {
            background: #f5e6c8;
            border-radius: 20px;
            padding: 30px;
            border: 8px solid #8b4513;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
            position: relative;
            min-height: 800px;
        }
        
        .board-grid {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            grid-template-rows: repeat(11, 1fr);
            gap: 2px;
            height: 700px;
        }
        
        /* –ö–ª–µ—Ç–∫–∏ –ø–æ–ª—è */
        .cell {
            background: white;
            border: 2px solid #8b4513;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 5px;
            position: relative;
            font-size: 0.8rem;
            overflow: hidden;
        }
        
        .cell.corner {
            background: #d4a76a;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .cell.property {
            transition: all 0.3s;
        }
        
        .cell.property:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .property-name {
            font-weight: bold;
            margin-bottom: 3px;
            font-size: 0.75rem;
        }
        
        .property-price {
            color: #2a5c3a;
            font-weight: bold;
            font-size: 0.7rem;
        }
        
        .property-owned {
            position: absolute;
            bottom: 2px;
            left: 0;
            right: 0;
            height: 6px;
        }
        
        /* –¶–≤–µ—Ç–∞ –≥—Ä—É–ø–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ */
        .brown { background: #8b4513; color: white; }
        .light-blue { background: #87ceeb; }
        .pink { background: #ff69b4; }
        .orange { background: #ffa500; }
        .red { background: #ff4444; }
        .yellow { background: #ffff00; }
        .green { background: #90ee90; }
        .dark-blue { background: #4169e1; color: white; }
        
        /* –ò–≥—Ä–æ–≤—ã–µ —Ñ–∏—à–∫–∏ */
        .player-token {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 5;
            transition: all 0.5s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        .info-panel {
            background: rgba(0, 0, 0, 0.85);
            border-radius: 20px;
            padding: 25px;
            border: 5px solid #e6b325;
            color: white;
        }
        
        .players-section {
            margin-bottom: 30px;
        }
        
        .player-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 5px solid;
            transition: all 0.3s;
        }
        
        .player-info.active {
            background: rgba(255, 204, 0, 0.2);
            border-left: 5px solid #ffcc00;
            transform: scale(1.02);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .player-name {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .player-money {
            font-size: 1.4rem;
            color: #e6b325;
            font-weight: bold;
        }
        
        .player-properties {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .property-chip {
            background: rgba(255, 255, 255, 0.2);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            white-space: nowrap;
        }
        
        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls-section {
            background: rgba(30, 60, 30, 0.7);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .die {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: diceRoll 0.5s;
        }
        
        @keyframes diceRoll {
            0% { transform: rotate(0deg) scale(0.5); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .btn:hover:not(:disabled) {
            transform: scale(1.05);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-roll {
            background: linear-gradient(to bottom, #e6b325, #c89411);
            color: #222;
        }
        
        .btn-buy {
            background: linear-gradient(to bottom, #2a9d8f, #1a7d6f);
            color: white;
        }
        
        .btn-auction {
            background: linear-gradient(to bottom, #9b5de5, #7b3dc4);
            color: white;
        }
        
        .btn-end-turn {
            background: linear-gradient(to bottom, #ff6b6b, #cc4444);
            color: white;
        }
        
        .btn-trade {
            background: linear-gradient(to bottom, #4a7c59, #2a5c3a);
            color: white;
        }
        
        .btn-start {
            background: linear-gradient(to bottom, #e6b325, #c89411);
            color: #222;
            font-size: 1.3rem;
            padding: 20px;
        }
        
        .current-action {
            text-align: center;
            font-size: 1.4rem;
            color: #ffcc00;
            margin: 20px 0;
            min-height: 40px;
            font-weight: bold;
        }
        
        .game-log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            margin-top: 25px;
        }
        
        .log-entry {
            padding: 8px;
            border-bottom: 1px solid #333;
            color: #ccc;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-entry.new {
            color: #ffcc00;
            animation: highlight 1s;
        }
        
        @keyframes highlight {
            0% { background: rgba(255, 204, 0, 0.2); }
            100% { background: transparent; }
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal {
            background: linear-gradient(135deg, #f5e6c8, #d4a76a);
            border-radius: 20px;
            padding: 30px;
            border: 5px solid #8b4513;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 25px;
            color: #8b4513;
        }
        
        .modal-header h2 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .property-details {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 3px solid;
        }
        
        .property-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .property-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2a5c3a;
        }
        
        .houses-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .house {
            width: 25px;
            height: 25px;
            background: #2a9d8f;
            border-radius: 3px;
        }
        
        .hotel {
            width: 30px;
            height: 30px;
            background: #ff4444;
            border-radius: 5px;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-btn:hover {
            transform: scale(1.05);
        }
        
        .btn-build {
            background: #2a9d8f;
            color: white;
        }
        
        .btn-mortgage {
            background: #e6b325;
            color: #222;
        }
        
        .btn-sell {
            background: #ff6b6b;
            color: white;
        }
        
        .btn-close {
            background: #666;
            color: white;
        }
        
        .trading-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .trade-player {
            margin-bottom: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .trade-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
        
        .trade-item {
            padding: 8px 15px;
            background: #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .trade-item.selected {
            background: #2a9d8f;
            color: white;
        }
        
        .trade-item:hover {
            transform: scale(1.05);
        }
        
        .bankruptcy-modal {
            background: linear-gradient(135deg, #8b0000, #660000);
            color: white;
            text-align: center;
        }
        
        .bankruptcy-modal h2 {
            color: #ffcc00;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .winner-announcement {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #e6b325, #c89411);
            border-radius: 20px;
            color: #222;
            animation: winnerPulse 2s infinite;
        }
        
        @keyframes winnerPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .winner-announcement h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #8b4513;
        }
        
        .winner-announcement p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #4a7c59;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .game-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            color: #e6b325;
            font-weight: bold;
        }
        
        .hotkeys {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .hotkey-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #444;
        }
        
        .hotkey-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <h1><i class="fas fa-landmark"></i> –ú–û–ù–û–ü–û–õ–ò–Ø</h1>
            <div class="subtitle">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞ —Å –±–æ—Ç–∞–º–∏</div>
        </div>
        
        <div class="game-container">
            <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
            <div class="game-board">
                <div class="board-grid">
                    <!-- –£–≥–ª–æ–≤—ã–µ –∏ –æ–±—ã—á–Ω—ã–µ –∫–ª–µ—Ç–∫–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Vue -->
                    <div v-for="cell in boardCells" :key="cell.id"
                         :class="['cell', cell.type, cell.colorGroup, {'corner': cell.isCorner}]"
                         :style="getCellStyle(cell)">
                        <div class="property-name">{{ cell.name }}</div>
                        <div v-if="cell.price" class="property-price">{{ cell.price }}‚ÇΩ</div>
                        <div v-if="cell.owner" class="property-owned" :style="{backgroundColor: getPlayerColor(cell.owner)}"></div>
                        
                        <!-- –î–æ–º–∞ –∏ –æ—Ç–µ–ª–∏ -->
                        <div v-if="cell.houses > 0" class="houses-display" style="position: absolute; bottom: 10px;">
                            <div v-for="n in Math.min(cell.houses, 4)" :key="n" class="house"></div>
                            <div v-if="cell.hotel" class="hotel"></div>
                        </div>
                    </div>
                </div>
                
                <!-- –ò–≥—Ä–æ–≤—ã–µ —Ñ–∏—à–∫–∏ -->
                <div v-for="player in players" :key="player.id" 
                     class="player-token"
                     :style="{
                        backgroundColor: player.color,
                        top: player.position.y + 'px',
                        left: player.position.x + 'px'
                     }">
                    {{ player.name.charAt(0) }}
                </div>
            </div>
            
            <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
            <div class="info-panel">
                <div class="players-section">
                    <h2 style="color: #e6b325; margin-bottom: 20px;">–ò–≥—Ä–æ–∫–∏</h2>
                    <div v-for="player in players" :key="player.id" 
                         class="player-info" :class="{active: player.isActive}">
                        <div class="player-header">
                            <div class="player-name" :style="{color: player.color}">
                                {{ player.name }}
                                <span v-if="player.isHuman"> (–í—ã)</span>
                                <span v-if="player.isBankrupt" style="color: #ff4444;"> - –ë–ê–ù–ö–†–û–¢</span>
                            </div>
                            <div class="player-money">{{ player.money }}‚ÇΩ</div>
                        </div>
                        <div>–ü–æ–∑–∏—Ü–∏—è: {{ getCellName(player.positionIndex) }}</div>
                        <div v-if="player.inJail">–í —Ç—é—Ä—å–º–µ (—Ö–æ–¥–æ–≤: {{ player.jailTurns }})</div>
                        
                        <div class="player-properties">
                            <div v-for="property in player.properties" :key="property"
                                 class="property-chip" :style="{backgroundColor: getPropertyColor(property)}">
                                {{ getPropertyShortName(property) }}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="controls-section">
                    <div class="current-action">
                        {{ currentAction }}
                    </div>
                    
                    <div class="dice-container" v-if="gameState.started && !gameState.gameOver">
                        <div class="die">{{ dice1 }}</div>
                        <div class="die">{{ dice2 }}</div>
                    </div>
                    
                    <div v-if="!gameState.started">
                        <button class="btn btn-start" @click="startGame">
                            <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                        
                        <div class="game-stats">
                            <div class="stat-box">
                                <div>–ò–≥—Ä–æ–∫–æ–≤</div>
                                <div class="stat-value">{{ players.length }}</div>
                            </div>
                            <div class="stat-box">
                                <div>–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª</div>
                                <div class="stat-value">1500‚ÇΩ</div>
                            </div>
                            <div class="stat-box">
                                <div>–°–ª–æ–∂–Ω–æ—Å—Ç—å</div>
                                <div class="stat-value">{{ botDifficulty }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div v-if="gameState.started && !gameState.gameOver && activePlayer.isHuman">
                        <button class="btn btn-roll" @click="rollDice" :disabled="!canRoll">
                            <i class="fas fa-dice"></i> –ë—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫–∏
                        </button>
                        
                        <div v-if="showBuyProperty">
                            <button class="btn btn-buy" @click="buyProperty">
                                <i class="fas fa-shopping-cart"></i> –ö—É–ø–∏—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –∑–∞ {{ currentCell.price }}‚ÇΩ
                            </button>
                            <button class="btn btn-auction" @click="startAuction">
                                <i class="fas fa-gavel"></i> –ù–∞—á–∞—Ç—å –∞—É–∫—Ü–∏–æ–Ω
                            </button>
                        </div>
                        
                        <div v-if="showBuildOptions">
                            <button class="btn btn-buy" @click="openBuildModal">
                                <i class="fas fa-hammer"></i> –°—Ç—Ä–æ–∏—Ç—å –¥–æ–º–∞/–æ—Ç–µ–ª–∏
                            </button>
                        </div>
                        
                        <button class="btn btn-trade" @click="openTradeModal" :disabled="!canTrade">
                            <i class="fas fa-exchange-alt"></i> –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–¥–µ–ª–∫—É
                        </button>
                        
                        <button class="btn btn-end-turn" @click="endTurn">
                            <i class="fas fa-forward"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ö–æ–¥
                        </button>
                    </div>
                </div>
                
                <div class="game-stats" v-if="gameState.started">
                    <div class="stat-box">
                        <div>–ë–∞–Ω–∫</div>
                        <div class="stat-value">{{ bankMoney }}‚ÇΩ</div>
                    </div>
                    <div class="stat-box">
                        <div>–•–æ–¥</div>
                        <div class="stat-value">{{ gameState.turn }}</div>
                    </div>
                    <div class="stat-box">
                        <div>–°–≤–æ–±–æ–¥–Ω—ã—Ö</div>
                        <div class="stat-value">{{ getAvailablePropertiesCount() }}</div>
                    </div>
                </div>
                
                <div class="game-log">
                    <h3 style="color: #e6b325; margin-bottom: 15px;">–õ–æ–≥ –∏–≥—Ä—ã</h3>
                    <div v-for="(log, index) in gameLog" :key="index" 
                         class="log-entry" :class="{new: index === gameLog.length - 1}">
                        {{ log }}
                    </div>
                </div>
                
                <div class="hotkeys">
                    <div class="hotkey-item">
                        <span>–ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–æ–≤:</span>
                        <span>–ü—Ä–æ–±–µ–ª / R</span>
                    </div>
                    <div class="hotkey-item">
                        <span>–ö—É–ø–∏—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å:</span>
                        <span>B</span>
                    </div>
                    <div class="hotkey-item">
                        <span>–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ö–æ–¥:</span>
                        <span>Enter / E</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∫—É–ø–∫–∏/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é -->
        <div v-if="showPropertyModal" class="modal-overlay" @click.self="closePropertyModal">
            <div class="modal">
                <div class="modal-header">
                    <h2>{{ currentCell.name }}</h2>
                    <div v-if="currentCell.owner" style="font-size: 1.2rem; color: #2a5c3a;">
                        –í–ª–∞–¥–µ–ª–µ—Ü: <strong :style="{color: getPlayerColor(currentCell.owner)}">{{ getPlayerName(currentCell.owner) }}</strong>
                    </div>
                    <div v-else style="font-size: 1.2rem; color: #2a5c3a;">–°–≤–æ–±–æ–¥–Ω–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</div>
                </div>
                
                <div class="property-details" :style="{borderColor: currentCell.colorGroup}">
                    <div class="property-title" :style="{color: currentCell.colorGroup}">
                        {{ currentCell.type === 'property' ? '–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å' : 
                          currentCell.type === 'railroad' ? '–ñ–µ–ª–µ–∑–Ω–∞—è –¥–æ—Ä–æ–≥–∞' :
                          currentCell.type === 'utility' ? '–ö–æ–º–º—É–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ' : currentCell.type }}
                    </div>
                    
                    <div class="property-stats">
                        <div class="stat-item">
                            <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                            <div class="stat-value">{{ currentCell.price }}‚ÇΩ</div>
                        </div>
                        <div class="stat-item">
                            <div>–ê—Ä–µ–Ω–¥–∞</div>
                            <div class="stat-value">{{ getCurrentRent() }}‚ÇΩ</div>
                        </div>
                        <div v-if="currentCell.type === 'property'" class="stat-item">
                            <div>–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–º–∞</div>
                            <div class="stat-value">{{ currentCell.housePrice }}‚ÇΩ</div>
                        </div>
                        <div v-if="currentCell.type === 'property'" class="stat-item">
                            <div>–ó–∞–ª–æ–≥</div>
                            <div class="stat-value">{{ Math.floor(currentCell.price / 2) }}‚ÇΩ</div>
                        </div>
                    </div>
                    
                    <div v-if="currentCell.type === 'property'" class="houses-display">
                        <div v-for="n in 4" :key="n" 
                             class="house" 
                             :style="{backgroundColor: currentCell.houses >= n ? '#2a9d8f' : '#ddd'}"></div>
                        <div class="hotel" :style="{backgroundColor: currentCell.hotel ? '#ff4444' : '#ddd'}"></div>
                    </div>
                    
                    <div v-if="currentCell.type === 'property'" style="text-align: center; margin-top: 15px;">
                        <div>–ê—Ä–µ–Ω–¥–∞ —Å –¥–æ–º–∞–º–∏:</div>
                        <div style="font-size: 0.9rem; color: #666;">
                            1 –¥–æ–º: {{ currentCell.rent1 }}‚ÇΩ ‚Ä¢ 
                            2 –¥–æ–º–∞: {{ currentCell.rent2 }}‚ÇΩ ‚Ä¢ 
                            3 –¥–æ–º–∞: {{ currentCell.rent3 }}‚ÇΩ ‚Ä¢ 
                            4 –¥–æ–º–∞: {{ currentCell.rent4 }}‚ÇΩ ‚Ä¢
                            –û—Ç–µ–ª—å: {{ currentCell.rentHotel }}‚ÇΩ
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <template v-if="!currentCell.owner && activePlayer.isHuman">
                        <button class="modal-btn btn-buy" @click="buyProperty">
                            –ö—É–ø–∏—Ç—å –∑–∞ {{ currentCell.price }}‚ÇΩ
                        </button>
                        <button class="modal-btn btn-auction" @click="startAuction">
                            –ê—É–∫—Ü–∏–æ–Ω
                        </button>
                    </template>
                    
                    <template v-else-if="currentCell.owner === activePlayer.id">
                        <button v-if="currentCell.type === 'property' && !currentCell.mortgaged" 
                                class="modal-btn btn-build" @click="buildHouse" :disabled="!canBuildOnCurrentProperty">
                            {{ currentCell.hotel ? '–û—Ç–µ–ª—å –ø–æ—Å—Ç—Ä–æ–µ–Ω' : 
                               currentCell.houses === 4 ? '–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–µ–ª—å –∑–∞ ' + currentCell.housePrice + '‚ÇΩ' :
                               '–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º –∑–∞ ' + currentCell.housePrice + '‚ÇΩ' }}
                        </button>
                        <button class="modal-btn" :class="currentCell.mortgaged ? 'btn-build' : 'btn-mortgage'"
                                @click="toggleMortgage">
                            {{ currentCell.mortgaged ? '–í—ã–∫—É–ø–∏—Ç—å –∑–∞ ' + Math.floor(currentCell.price * 0.55) + '‚ÇΩ' : 
                               '–ó–∞–ª–æ–∂–∏—Ç—å –∑–∞ ' + Math.floor(currentCell.price / 2) + '‚ÇΩ' }}
                        </button>
                        <button v-if="currentCell.type === 'property' && (currentCell.houses > 0 || currentCell.hotel)"
                                class="modal-btn btn-sell" @click="sellHouse">
                            –ü—Ä–æ–¥–∞—Ç—å {{ currentCell.hotel ? '–æ—Ç–µ–ª—å' : '–¥–æ–º' }}
                        </button>
                    </template>
                    
                    <template v-else-if="currentCell.owner && currentCell.owner !== activePlayer.id">
                        <div style="text-align: center; padding: 20px; color: #8b4513;">
                            –í—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∞—Ä–µ–Ω–¥—É {{ getCurrentRent() }}‚ÇΩ –∏–≥—Ä–æ–∫—É {{ getPlayerName(currentCell.owner) }}
                        </div>
                    </template>
                    
                    <button class="modal-btn btn-close" @click="closePropertyModal">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ—Ä–≥–æ–≤–ª–∏ -->
        <div v-if="showTradeModal" class="modal-overlay" @click.self="closeTradeModal">
            <div class="modal">
                <div class="modal-header">
                    <h2>–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–¥–µ–ª–∫—É</h2>
                </div>
                
                <div class="trading-section">
                    <div class="trade-player">
                        <h3>–í—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ:</h3>
                        <div>–î–µ–Ω—å–≥–∏: <input type="number" v-model="tradeOffer.moneyFromPlayer" min="0" :max="activePlayer.money" style="width: 100px; margin-left: 10px;">‚ÇΩ</div>
                        
                        <div style="margin-top: 10px;">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å:</div>
                        <div class="trade-items">
                            <div v-for="property in activePlayer.properties" :key="property"
                                 class="trade-item" 
                                 :class="{selected: tradeOffer.propertiesFromPlayer.includes(property)}"
                                 @click="toggleTradeProperty(property, 'fromPlayer')">
                                {{ getPropertyShortName(property) }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="trade-player">
                        <h3>–ü–æ–ª—É—á–∞–µ—Ç–µ –æ—Ç {{ tradePartner.name }}:</h3>
                        <div>–î–µ–Ω—å–≥–∏: <input type="number" v-model="tradeOffer.moneyToPlayer" min="0" :max="tradePartner.money" style="width: 100px; margin-left: 10px;">‚ÇΩ</div>
                        
                        <div style="margin-top: 10px;">–ù–¥–≤–∏–∂–∏–º–æ—Å—Ç—å:</div>
                        <div class="trade-items">
                            <div v-for="property in tradePartner.properties" :key="property"
                                 class="trade-item"
                                 :class="{selected: tradeOffer.propertiesToPlayer.includes(property)}"
                                 @click="toggleTradeProperty(property, 'toPlayer')">
                                {{ getPropertyShortName(property) }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-actions" style="margin-top: 30px;">
                        <button class="modal-btn btn-buy" @click="sendTradeOffer" :disabled="!isTradeOfferValid">
                            –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–¥–µ–ª–∫—É
                        </button>
                        <button class="modal-btn btn-close" @click="closeTradeModal">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                    
                    <div v-if="tradePartner" style="margin-top: 20px; text-align: center; color: #666;">
                        –í—ã —Ç–æ—Ä–≥—É–µ—Ç–µ —Å {{ tradePartner.name }} (—Å–ª–æ–∂–Ω–æ—Å—Ç—å: {{ tradePartner.difficulty }})
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ -->
        <div v-if="showBankruptcyModal" class="modal-overlay">
            <div class="modal bankruptcy-modal">
                <h2>–ë–ê–ù–ö–†–û–¢–°–¢–í–û!</h2>
                <div style="font-size: 1.5rem; margin-bottom: 20px;">
                    {{ bankruptPlayer.name }} –æ–±–∞–Ω–∫—Ä–æ—Ç–∏–ª—Å—è!
                </div>
                <div style="margin-bottom: 30px;">
                    –í—Å–µ –∏–º—É—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç {{ bankruptPlayer.debtTo === 'bank' ? '–±–∞–Ω–∫—É' : getPlayerName(bankruptPlayer.debtTo) }}
                </div>
                <button class="modal-btn btn-close" @click="closeBankruptcyModal">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>
        
        <!-- –ü–æ–±–µ–¥–∏—Ç–µ–ª—å -->
        <div v-if="gameState.gameOver" class="modal-overlay">
            <div class="modal">
                <div class="winner-announcement">
                    <h2>üéâ –ü–û–ë–ï–î–ò–¢–ï–õ–¨! üéâ</h2>
                    <p>–ü–æ–±–µ–¥–∏–ª {{ winner.name }} —Å –∫–∞–ø–∏—Ç–∞–ª–æ–º {{ winner.money }}‚ÇΩ!</p>
                    <p>–ò–≥—Ä–∞ –¥–ª–∏–ª–∞—Å—å {{ gameState.turn }} —Ö–æ–¥–æ–≤</p>
                    <button class="btn btn-start" @click="resetGame" style="margin-top: 30px;">
                        <i class="fas fa-redo"></i> –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>–ú–æ–Ω–æ–ø–æ–ª–∏—è ‚Ä¢ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ ‚Ä¢ 4 –∏–≥—Ä–æ–∫–∞ (1 —á–µ–ª–æ–≤–µ–∫, 3 –±–æ—Ç–∞) ‚Ä¢ –£–¥–∞—á–∏ –≤ –∏–≥—Ä–µ!</p>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π</p>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, watch, onMounted } = Vue;
        
        createApp({
            setup() {
                // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
                const BOARD_SIZE = 40;
                const START_MONEY = 1500;
                const JAIL_POSITION = 10;
                const GO_POSITION = 0;
                const INCOME_TAX = 200;
                const LUXURY_TAX = 100;
                
                // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
                const gameState = ref({
                    started: false,
                    gameOver: false,
                    turn: 0,
                    currentPlayerIndex: 0,
                    phase: 'roll' // roll, buy, trade, end
                });
                
                const players = ref([
                    { 
                        id: 1, 
                        name: '–ò–≥—Ä–æ–∫', 
                        isHuman: true, 
                        money: START_MONEY, 
                        positionIndex: 0, 
                        position: { x: 650, y: 650 },
                        properties: [],
                        isActive: false,
                        color: '#ff4444',
                        inJail: false,
                        jailTurns: 0,
                        getOutOfJailCards: 0,
                        isBankrupt: false,
                        difficulty: '–ß–µ–ª–æ–≤–µ–∫'
                    },
                    { 
                        id: 2, 
                        name: '–ë–æ—Ç-1', 
                        isHuman: false, 
                        money: START_MONEY, 
                        positionIndex: 0, 
                        position: { x: 680, y: 650 },
                        properties: [],
                        isActive: false,
                        color: '#4169e1',
                        inJail: false,
                        jailTurns: 0,
                        getOutOfJailCards: 0,
                        isBankrupt: false,
                        difficulty: '–°—Ä–µ–¥–Ω–∏–π',
                        personality: 'balanced'
                    },
                    { 
                        id: 3, 
                        name: '–ë–æ—Ç-2', 
                        isHuman: false, 
                        money: START_MONEY, 
                        positionIndex: 0, 
                        position: { x: 650, y: 680 },
                        properties: [],
                        isActive: false,
                        color: '#90ee90',
                        inJail: false,
                        jailTurns: 0,
                        getOutOfJailCards: 0,
                        isBankrupt: false,
                        difficulty: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π',
                        personality: 'aggressive'
                    },
                    { 
                        id: 4, 
                        name: '–ë–æ—Ç-3', 
                        isHuman: false, 
                        money: START_MONEY, 
                        positionIndex: 0, 
                        position: { x: 680, y: 680 },
                        properties: [],
                        isActive: false,
                        color: '#ff69b4',
                        inJail: false,
                        jailTurns: 0,
                        getOutOfJailCards: 0,
                        isBankrupt: false,
                        difficulty: '–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π',
                        personality: 'cautious'
                    }
                ]);
                
                // –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
                const boardCells = ref([]);
                const dice1 = ref(1);
                const dice2 = ref(1);
                const currentAction = ref('–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"');
                const gameLog = ref(['–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–æ–Ω–æ–ø–æ–ª–∏—é!']);
                const botDifficulty = ref('–°—Ä–µ–¥–Ω—è—è');
                const bankMoney = ref(10000);
                
                // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                const showPropertyModal = ref(false);
                const showTradeModal = ref(false);
                const showBankruptcyModal = ref(false);
                const showBuyProperty = ref(false);
                const showBuildOptions = ref(false);
                
                // –¢–æ—Ä–≥–æ–≤–ª—è
                const tradePartner = ref(null);
                const tradeOffer = ref({
                    moneyFromPlayer: 0,
                    moneyToPlayer: 0,
                    propertiesFromPlayer: [],
                    propertiesToPlayer: []
                });
                
                // –ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
                const bankruptPlayer = ref(null);
                const winner = ref(null);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
                const initializeBoard = () => {
                    const cells = [];
                    
                    // –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ –ú–æ–Ω–æ–ø–æ–ª–∏–∏
                    const boardData = [
                        // –°—Ç–æ—Ä–æ–Ω–∞ 1 (–Ω–∏–∂–Ω—è—è, —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ)
                        { id: 0, name: '–°—Ç–∞—Ä—Ç', type: 'corner', isCorner: true, action: 'collect', amount: 200 },
                        { id: 1, name: '–°—Ç–∞—Ä–∞—è –¥–æ—Ä–æ–≥–∞', type: 'property', colorGroup: 'brown', price: 60, rent: 2, rent1: 10, rent2: 30, rent3: 90, rent4: 160, rentHotel: 250, housePrice: 50 },
                        { id: 2, name: '–ö–∞–∑–Ω–∞', type: 'community', action: 'community' },
                        { id: 3, name: '–ë–µ–ª–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'brown', price: 60, rent: 4, rent1: 20, rent2: 60, rent3: 180, rent4: 320, rentHotel: 450, housePrice: 50 },
                        { id: 4, name: '–ü–æ–¥–æ—Ö–æ–¥–Ω—ã–π –Ω–∞–ª–æ–≥', type: 'tax', amount: INCOME_TAX },
                        { id: 5, name: '–í–æ–∫–∑–∞–ª "–Æ–∂–Ω—ã–π"', type: 'railroad', price: 200, rent: 25, rent2: 50, rent3: 100, rent4: 200 },
                        { id: 6, name: '–†–æ–∑–æ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'light-blue', price: 100, rent: 6, rent1: 30, rent2: 90, rent3: 270, rent4: 400, rentHotel: 550, housePrice: 50 },
                        { id: 7, name: '–®–∞–Ω—Å', type: 'chance', action: 'chance' },
                        { id: 8, name: '–û—Ä–∞–Ω–∂–µ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'light-blue', price: 100, rent: 6, rent1: 30, rent2: 90, rent3: 270, rent4: 400, rentHotel: 550, housePrice: 50 },
                        { id: 9, name: '–ë–µ–ª–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'light-blue', price: 120, rent: 8, rent1: 40, rent2: 100, rent3: 300, rent4: 450, rentHotel: 600, housePrice: 50 },
                        
                        // –°—Ç–æ—Ä–æ–Ω–∞ 2 (–ø—Ä–∞–≤–∞—è, —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
                        { id: 10, name: '–¢—é—Ä—å–º–∞/–ü–æ—Å–µ—â–µ–Ω–∏–µ', type: 'corner', isCorner: true },
                        { id: 11, name: '–§–∏–æ–ª–µ—Ç–æ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'pink', price: 140, rent: 10, rent1: 50, rent2: 150, rent3: 450, rent4: 625, rentHotel: 750, housePrice: 100 },
                        { id: 12, name: '–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è', type: 'utility', price: 150, multiplier: 4 },
                        { id: 13, name: '–°–∏–Ω—è—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'pink', price: 140, rent: 10, rent1: 50, rent2: 150, rent3: 450, rent4: 625, rentHotel: 750, housePrice: 100 },
                        { id: 14, name: '–ì–æ–ª—É–±–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'pink', price: 160, rent: 12, rent1: 60, rent2: 180, rent3: 500, rent4: 700, rentHotel: 900, housePrice: 100 },
                        { id: 15, name: '–í–æ–∫–∑–∞–ª "–ó–∞–ø–∞–¥–Ω—ã–π"', type: 'railroad', price: 200, rent: 25, rent2: 50, rent3: 100, rent4: 200 },
                        { id: 16, name: '–†–æ–∑–æ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'orange', price: 180, rent: 14, rent1: 70, rent2: 200, rent3: 550, rent4: 750, rentHotel: 950, housePrice: 100 },
                        { id: 17, name: '–ö–∞–∑–Ω–∞', type: 'community', action: 'community' },
                        { id: 18, name: '–ñ–µ–ª—Ç–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'orange', price: 180, rent: 14, rent1: 70, rent2: 200, rent3: 550, rent4: 750, rentHotel: 950, housePrice: 100 },
                        { id: 19, name: '–ö—Ä–∞—Å–Ω–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'orange', price: 200, rent: 16, rent1: 80, rent2: 220, rent3: 600, rent4: 800, rentHotel: 1000, housePrice: 100 },
                        
                        // –°—Ç–æ—Ä–æ–Ω–∞ 3 (–≤–µ—Ä—Ö–Ω—è—è, —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ)
                        { id: 20, name: '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞', type: 'corner', isCorner: true },
                        { id: 21, name: '–ß–µ—Ä–Ω–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'red', price: 220, rent: 18, rent1: 90, rent2: 250, rent3: 700, rent4: 875, rentHotel: 1050, housePrice: 150 },
                        { id: 22, name: '–®–∞–Ω—Å', type: 'chance', action: 'chance' },
                        { id: 23, name: '–ó–µ–ª–µ–Ω–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'red', price: 220, rent: 18, rent1: 90, rent2: 250, rent3: 700, rent4: 875, rentHotel: 1050, housePrice: 150 },
                        { id: 24, name: '–ì–æ–ª—É–±–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'red', price: 240, rent: 20, rent1: 100, rent2: 300, rent3: 750, rent4: 925, rentHotel: 1100, housePrice: 150 },
                        { id: 25, name: '–í–æ–∫–∑–∞–ª "–°–µ–≤–µ—Ä–Ω—ã–π"', type: 'railroad', price: 200, rent: 25, rent2: 50, rent3: 100, rent4: 200 },
                        { id: 26, name: '–ñ–µ–ª—Ç–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'yellow', price: 260, rent: 22, rent1: 110, rent2: 330, rent3: 800, rent4: 975, rentHotel: 1150, housePrice: 150 },
                        { id: 27, name: '–°–∏–Ω—è—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'yellow', price: 260, rent: 22, rent1: 110, rent2: 330, rent3: 800, rent4: 975, rentHotel: 1150, housePrice: 150 },
                        { id: 28, name: '–í–æ–¥–æ–ø—Ä–æ–≤–æ–¥', type: 'utility', price: 150, multiplier: 4 },
                        { id: 29, name: '–§–∏–æ–ª–µ—Ç–æ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'yellow', price: 280, rent: 24, rent1: 120, rent2: 360, rent3: 850, rent4: 1025, rentHotel: 1200, housePrice: 150 },
                        
                        // –°—Ç–æ—Ä–æ–Ω–∞ 4 (–ª–µ–≤–∞—è, —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)
                        { id: 30, name: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –≤ —Ç—é—Ä—å–º—É', type: 'corner', isCorner: true, action: 'gotojail' },
                        { id: 31, name: '–ë–µ–ª–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'green', price: 300, rent: 26, rent1: 130, rent2: 390, rent3: 900, rent4: 1100, rentHotel: 1275, housePrice: 200 },
                        { id: 32, name: '–ß–µ—Ä–Ω–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'green', price: 300, rent: 26, rent1: 130, rent2: 390, rent3: 900, rent4: 1100, rentHotel: 1275, housePrice: 200 },
                        { id: 33, name: '–ö–∞–∑–Ω–∞', type: 'community', action: 'community' },
                        { id: 34, name: '–ì–æ–ª—É–±–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'green', price: 320, rent: 28, rent1: 150, rent2: 450, rent3: 1000, rent4: 1200, rentHotel: 1400, housePrice: 200 },
                        { id: 35, name: '–í–æ–∫–∑–∞–ª "–í–æ—Å—Ç–æ—á–Ω—ã–π"', type: 'railroad', price: 200, rent: 25, rent2: 50, rent3: 100, rent4: 200 },
                        { id: 36, name: '–®–∞–Ω—Å', type: 'chance', action: 'chance' },
                        { id: 37, name: '–†–æ–∑–æ–≤–∞—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'dark-blue', price: 350, rent: 35, rent1: 175, rent2: 500, rent3: 1100, rent4: 1300, rentHotel: 1500, housePrice: 200 },
                        { id: 38, name: '–ù–∞–ª–æ–≥ –Ω–∞ —Ä–æ—Å–∫–æ—à—å', type: 'tax', amount: LUXURY_TAX },
                        { id: 39, name: '–°–∏–Ω—è—è —É–ª–∏—Ü–∞', type: 'property', colorGroup: 'dark-blue', price: 400, rent: 50, rent1: 200, rent2: 600, rent3: 1400, rent4: 1700, rentHotel: 2000, housePrice: 200 }
                    ];
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                    boardData.forEach(cell => {
                        cell.owner = null;
                        cell.houses = 0;
                        cell.hotel = false;
                        cell.mortgaged = false;
                        cells.push(cell);
                    });
                    
                    boardCells.value = cells;
                };
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∏–ª—è –¥–ª—è –∫–ª–µ—Ç–∫–∏
                const getCellStyle = (cell) => {
                    const positions = calculateCellPositions();
                    const pos = positions[cell.id];
                    return {
                        gridColumn: `${pos.col} / span ${pos.colSpan || 1}`,
                        gridRow: `${pos.row} / span ${pos.rowSpan || 1}`
                    };
                };
                
                // –†–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–π –∫–ª–µ—Ç–æ–∫ –Ω–∞ —Å–µ—Ç–∫–µ
                const calculateCellPositions = () => {
                    const positions = {};
                    const size = 11; // –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏
                    
                    // –£–≥–ª–æ–≤—ã–µ –∫–ª–µ—Ç–∫–∏ (–±–æ–ª—å—à–∏–µ)
                    positions[0] = { row: 11, col: 11, rowSpan: 1, colSpan: 1 }; // –°—Ç–∞—Ä—Ç
                    positions[10] = { row: 1, col: 1, rowSpan: 1, colSpan: 1 }; // –¢—é—Ä—å–º–∞
                    positions[20] = { row: 1, col: 11, rowSpan: 1, colSpan: 1 }; // –ü–∞—Ä–∫–æ–≤–∫–∞
                    positions[30] = { row: 11, col: 1, rowSpan: 1, colSpan: 1 }; // –í —Ç—é—Ä—å–º—É
                    
                    // –ù–∏–∂–Ω–∏–π —Ä—è–¥ (1-9)
                    for (let i = 1; i <= 9; i++) {
                        positions[i] = { row: 11, col: 11 - i, rowSpan: 1, colSpan: 1 };
                    }
                    
                    // –ü—Ä–∞–≤—ã–π —Ä—è–¥ (11-19)
                    for (let i = 11; i <= 19; i++) {
                        positions[i] = { row: i - 9, col: 1, rowSpan: 1, colSpan: 1 };
                    }
                    
                    // –í–µ—Ä—Ö–Ω–∏–π —Ä—è–¥ (21-29)
                    for (let i = 21; i <= 29; i++) {
                        positions[i] = { row: 1, col: i - 19, rowSpan: 1, colSpan: 1 };
                    }
                    
                    // –õ–µ–≤—ã–π —Ä—è–¥ (31-39)
                    for (let i = 31; i <= 39; i++) {
                        positions[i] = { row: 41 - i, col: 11, rowSpan: 1, colSpan: 1 };
                    }
                    
                    return positions;
                };
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                const activePlayer = computed(() => {
                    return players.value[gameState.value.currentPlayerIndex];
                });
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–ª–µ—Ç–∫–∏
                const currentCell = computed(() => {
                    return boardCells.value[activePlayer.value.positionIndex];
                });
                
                // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
                const startGame = () => {
                    gameState.value.started = true;
                    gameState.value.turn = 1;
                    gameState.value.currentPlayerIndex = 0;
                    gameState.value.phase = 'roll';
                    
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                    players.value.forEach((player, index) => {
                        player.isActive = index === 0;
                    });
                    
                    currentAction.value = `${activePlayer.value.name}, –±—Ä–æ—Å–∞–π—Ç–µ –∫—É–±–∏–∫–∏!`;
                    addLog(`–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ü–µ—Ä–≤—ã–º —Ö–æ–¥–∏—Ç ${activePlayer.value.name}`);
                    
                    // –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ - –±–æ—Ç, –¥–µ–ª–∞–µ–º —Ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                    if (!activePlayer.value.isHuman) {
                        setTimeout(() => botTurn(), 1500);
                    }
                };
                
                // –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–æ–≤
                const rollDice = () => {
                    if (gameState.value.phase !== 'roll') return;
                    
                    dice1.value = Math.floor(Math.random() * 6) + 1;
                    dice2.value = Math.floor(Math.random() * 6) + 1;
                    const total = dice1.value + dice2.value;
                    
                    addLog(`${activePlayer.value.name} –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫–∏: ${dice1.value} + ${dice2.value} = ${total}`);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥ –∏–∑ —Ç—é—Ä—å–º—ã
                    if (activePlayer.value.inJail) {
                        handleJailRoll();
                        return;
                    }
                    
                    // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
                    movePlayer(total);
                    
                    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ
                    gameState.value.phase = 'action';
                    
                    // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ - –±–æ—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                    if (!activePlayer.value.isHuman) {
                        setTimeout(() => botAction(), 1000);
                    }
                };
                
                // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
                const movePlayer = (steps) => {
                    const player = activePlayer.value;
                    let newPosition = player.positionIndex + steps;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ "–°—Ç–∞—Ä—Ç"
                    if (newPosition >= BOARD_SIZE) {
                        newPosition = newPosition % BOARD_SIZE;
                        player.money += 200;
                        addLog(`${player.name} –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ "–°—Ç–∞—Ä—Ç" –∏ –ø–æ–ª—É—á–∞–µ—Ç 200‚ÇΩ`);
                    }
                    
                    player.positionIndex = newPosition;
                    updatePlayerPosition(player);
                    
                    addLog(`${player.name} –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ ${getCellName(newPosition)}`);
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–µ—Ç–∫–∏
                    setTimeout(() => handleLandOnCell(), 500);
                };
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
                const updatePlayerPosition = (player) => {
                    // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–π –∏–≥—Ä–µ –Ω—É–∂–Ω—ã —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
                    const baseX = 650;
                    const baseY = 650;
                    const offset = 30;
                    
                    // –†–∞—Å—á–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –¥–æ—Å–∫–µ
                    const angle = (player.positionIndex / BOARD_SIZE) * 2 * Math.PI;
                    const radius = 300;
                    
                    player.position.x = baseX + Math.cos(angle) * radius;
                    player.position.y = baseY + Math.sin(angle) * radius;
                    
                    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ
                    const playersOnCell = players.value.filter(p => 
                        p.positionIndex === player.positionIndex && p.id !== player.id
                    ).length;
                    
                    player.position.x += playersOnCell * offset;
                    player.position.y += playersOnCell * offset;
                };
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–ª–µ—Ç–∫—É
                const handleLandOnCell = () => {
                    const cell = currentCell.value;
                    const player = activePlayer.value;
                    
                    switch (cell.type) {
                        case 'property':
                        case 'railroad':
                        case 'utility':
                            if (cell.owner === null) {
                                // –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–∞
                                showBuyProperty.value = true;
                                currentAction.value = `${player.name}, –≤—ã –º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å ${cell.name} –∑–∞ ${cell.price}‚ÇΩ`;
                                
                                if (!player.isHuman) {
                                    // –ë–æ—Ç —Ä–µ—à–∞–µ—Ç, –ø–æ–∫—É–ø–∞—Ç—å –ª–∏
                                    setTimeout(() => botBuyDecision(), 1000);
                                }
                            } else if (cell.owner !== player.id) {
                                // –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É
                                payRent();
                            } else {
                                // –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
                                currentAction.value = `${player.name} –Ω–∞ —Å–≤–æ–µ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏`;
                                endTurn();
                            }
                            break;
                            
                        case 'tax':
                            payTax(cell.amount);
                            break;
                            
                        case 'community':
                        case 'chance':
                            drawCard(cell.type);
                            break;
                            
                        case 'corner':
                            handleCornerCell(cell);
                            break;
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞
                    if (player.isHuman && cell.type !== 'corner') {
                        showPropertyModal.value = true;
                    }
                };
                
                // –ü–æ–∫—É–ø–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
                const buyProperty = () => {
                    const player = activePlayer.value;
                    const cell = currentCell.value;
                    
                    if (player.money >= cell.price && !cell.owner) {
                        player.money -= cell.price;
                        cell.owner = player.id;
                        player.properties.push(cell.id);
                        
                        addLog(`${player.name} –ø–æ–∫—É–ø–∞–µ—Ç ${cell.name} –∑–∞ ${cell.price}‚ÇΩ`);
                        currentAction.value = `${player.name} –∫—É–ø–∏–ª ${cell.name}`;
                        
                        showBuyProperty.value = false;
                        showPropertyModal.value = false;
                        
                        endTurn();
                    }
                };
                
                // –ù–∞—á–∞—Ç—å –∞—É–∫—Ü–∏–æ–Ω
                const startAuction = () => {
                    addLog(`–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∞—É–∫—Ü–∏–æ–Ω –∑–∞ ${currentCell.value.name}`);
                    showPropertyModal.value = false;
                    
                    // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∞—É–∫—Ü–∏–æ–Ω - –ø–æ–∫—É–ø–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –∏–≥—Ä–æ–∫
                    const potentialBuyers = players.value.filter(p => 
                        !p.isBankrupt && p.money >= currentCell.value.price
                    );
                    
                    if (potentialBuyers.length > 0) {
                        const buyer = potentialBuyers[Math.floor(Math.random() * potentialBuyers.length)];
                        buyer.money -= currentCell.value.price;
                        currentCell.value.owner = buyer.id;
                        buyer.properties.push(currentCell.value.id);
                        
                        addLog(`${buyer.name} –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –∞—É–∫—Ü–∏–æ–Ω –∑–∞ ${currentCell.value.name} –∑–∞ ${currentCell.value.price}‚ÇΩ`);
                    }
                    
                    endTurn();
                };
                
                // –û–ø–ª–∞—Ç–∞ –∞—Ä–µ–Ω–¥—ã
                const payRent = () => {
                    const player = activePlayer.value;
                    const cell = currentCell.value;
                    const owner = players.value.find(p => p.id === cell.owner);
                    const rent = getCurrentRent();
                    
                    if (player.money >= rent) {
                        player.money -= rent;
                        owner.money += rent;
                        
                        addLog(`${player.name} –ø–ª–∞—Ç–∏—Ç –∞—Ä–µ–Ω–¥—É ${rent}‚ÇΩ –∑–∞ ${cell.name} –∏–≥—Ä–æ–∫—É ${owner.name}`);
                        currentAction.value = `${player.name} –ø–ª–∞—Ç–∏—Ç –∞—Ä–µ–Ω–¥—É ${rent}‚ÇΩ`;
                    } else {
                        // –ò–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø–ª–∞—Ç–∏—Ç—å
                        declareBankruptcy(player, owner.id, rent);
                    }
                    
                    endTurn();
                };
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∞—Ä–µ–Ω–¥—ã
                const getCurrentRent = () => {
                    const cell = currentCell.value;
                    
                    if (!cell.owner) return 0;
                    
                    switch (cell.type) {
                        case 'property':
                            if (cell.hotel) return cell.rentHotel;
                            if (cell.houses > 0) {
                                const rents = [cell.rent1, cell.rent2, cell.rent3, cell.rent4];
                                return rents[cell.houses - 1];
                            }
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–æ–Ω–æ–ø–æ–ª–∏—é (–≤—Å–µ —É–ª–∏—Ü—ã –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –æ–¥–Ω–æ–º—É –∏–≥—Ä–æ–∫—É)
                            const colorGroup = cell.colorGroup;
                            const owner = cell.owner;
                            const allPropertiesInGroup = boardCells.value.filter(c => 
                                c.colorGroup === colorGroup && c.type === 'property'
                            );
                            const ownedPropertiesInGroup = allPropertiesInGroup.filter(c => c.owner === owner);
                            
                            if (allPropertiesInGroup.length === ownedPropertiesInGroup.length) {
                                return cell.rent * 2; // –£–¥–≤–æ–µ–Ω–Ω–∞—è –∞—Ä–µ–Ω–¥–∞ –ø—Ä–∏ –º–æ–Ω–æ–ø–æ–ª–∏–∏
                            }
                            return cell.rent;
                            
                        case 'railroad':
                            // –ê—Ä–µ–Ω–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∂–µ–ª–µ–∑–Ω—ã—Ö –¥–æ—Ä–æ–≥ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞
                            const railroadsOwned = boardCells.value.filter(c => 
                                c.type === 'railroad' && c.owner === cell.owner
                            ).length;
                            const railroadRents = [cell.rent, cell.rent2, cell.rent3, cell.rent4];
                            return railroadRents[Math.min(railroadsOwned - 1, 3)];
                            
                        case 'utility':
                            // –ê—Ä–µ–Ω–¥–∞ = –º–Ω–æ–∂–∏—Ç–µ–ª—å * —Å—É–º–º—É –∫—É–±–∏–∫–æ–≤
                            const diceSum = dice1.value + dice2.value;
                            const utilitiesOwned = boardCells.value.filter(c => 
                                c.type === 'utility' && c.owner === cell.owner
                            ).length;
                            const multiplier = utilitiesOwned === 2 ? 10 : cell.multiplier;
                            return diceSum * multiplier;
                            
                        default:
                            return 0;
                    }
                };
                
                // –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–æ–≥–∞
                const payTax = (amount) => {
                    const player = activePlayer.value;
                    
                    if (player.money >= amount) {
                        player.money -= amount;
                        bankMoney.value += amount;
                        
                        addLog(`${player.name} –ø–ª–∞—Ç–∏—Ç –Ω–∞–ª–æ–≥ ${amount}‚ÇΩ`);
                        currentAction.value = `${player.name} –ø–ª–∞—Ç–∏—Ç –Ω–∞–ª–æ–≥`;
                    } else {
                        declareBankruptcy(player, 'bank', amount);
                    }
                    
                    endTurn();
                };
                
                // –í–∑—è—Ç–∏–µ –∫–∞—Ä—Ç—ã —à–∞–Ω—Å–∞/–∫–∞–∑–Ω—ã
                const drawCard = (deckType) => {
                    const player = activePlayer.value;
                    const cards = deckType === 'chance' ? chanceCards : communityChestCards;
                    const card = cards[Math.floor(Math.random() * cards.length)];
                    
                    addLog(`${player.name} –±–µ—Ä–µ—Ç –∫–∞—Ä—Ç—É ${deckType}: ${card.text}`);
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç—ã
                    switch (card.action) {
                        case 'collect':
                            player.money += card.amount;
                            break;
                        case 'pay':
                            if (player.money >= card.amount) {
                                player.money -= card.amount;
                                bankMoney.value += card.amount;
                            } else {
                                declareBankruptcy(player, 'bank', card.amount);
                            }
                            break;
                        case 'move':
                            player.positionIndex = card.position;
                            updatePlayerPosition(player);
                            handleLandOnCell();
                            return; // –ù–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º —Ö–æ–¥ —Å—Ä–∞–∑—É
                        case 'jail':
                            sendToJail(player);
                            break;
                        case 'getoutofjail':
                            player.getOutOfJailCards += 1;
                            break;
                    }
                    
                    endTurn();
                };
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≥–ª–æ–≤–æ–π –∫–ª–µ—Ç–∫–∏
                const handleCornerCell = (cell) => {
                    const player = activePlayer.value;
                    
                    switch (cell.id) {
                        case 0: // –°—Ç–∞—Ä—Ç
                            player.money += 200;
                            addLog(`${player.name} –ø–æ–ª—É—á–∞–µ—Ç 200‚ÇΩ –∑–∞ –ø—Ä–æ—Ö–æ–¥ —á–µ—Ä–µ–∑ "–°—Ç–∞—Ä—Ç"`);
                            break;
                        case 10: // –¢—é—Ä—å–º–∞ (–ø—Ä–æ—Å—Ç–æ –ø–æ—Å–µ—â–µ–Ω–∏–µ)
                            addLog(`${player.name} –ø–æ—Å–µ—â–∞–µ—Ç —Ç—é—Ä—å–º—É`);
                            break;
                        case 20: // –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞
                            // –í –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º–æ–Ω–æ–ø–æ–ª–∏–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
                            addLog(`${player.name} –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –ø–∞—Ä–∫–æ–≤–∫–µ`);
                            break;
                        case 30: // –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –≤ —Ç—é—Ä—å–º—É
                            sendToJail(player);
                            return; // –ù–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º —Ö–æ–¥ —Å—Ä–∞–∑—É
                    }
                    
                    endTurn();
                };
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ç—é—Ä—å–º—É
                const sendToJail = (player) => {
                    player.positionIndex = JAIL_POSITION;
                    player.inJail = true;
                    player.jailTurns = 0;
                    updatePlayerPosition(player);
                    
                    addLog(`${player.name} –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç—é—Ä—å–º—É!`);
                    currentAction.value = `${player.name} –≤ —Ç—é—Ä—å–º–µ`;
                    
                    if (player.isHuman) {
                        // –î–ª—è –∏–≥—Ä–æ–∫–∞-—á–µ–ª–æ–≤–µ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                        gameState.value.phase = 'roll';
                    } else {
                        // –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–π—Ç–∏ –∏–∑ —Ç—é—Ä—å–º—ã
                        setTimeout(() => botJailAction(), 1000);
                    }
                };
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—Ä–æ—Å–∫–∞ –∏–∑ —Ç—é—Ä—å–º—ã
                const handleJailRoll = () => {
                    const player = activePlayer.value;
                    
                    if (dice1.value === dice2.value) {
                        // –í—ã–±—Ä–æ—Å–∏–ª –¥—É–±–ª—å - –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ç—é—Ä—å–º—ã
                        player.inJail = false;
                        player.jailTurns = 0;
                        addLog(`${player.name} –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –¥—É–±–ª—å –∏ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ç—é—Ä—å–º—ã!`);
                        movePlayer(dice1.value + dice2.value);
                    } else {
                        // –ù–µ –≤—ã–±—Ä–æ—Å–∏–ª –¥—É–±–ª—å
                        player.jailTurns += 1;
                        
                        if (player.jailTurns >= 3) {
                            // –û—Ç—Å–∏–¥–µ–ª 3 —Ö–æ–¥–∞ - –¥–æ–ª–∂–µ–Ω –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
                            if (player.getOutOfJailCards > 0) {
                                player.getOutOfJailCards -= 1;
                                player.inJail = false;
                                addLog(`${player.name} –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ä—Ç—É "–í—ã—Ö–æ–¥ –∏–∑ —Ç—é—Ä—å–º—ã"`);
                                movePlayer(dice1.value + dice2.value);
                            } else if (player.money >= 50) {
                                player.money -= 50;
                                player.inJail = false;
                                addLog(`${player.name} –ø–ª–∞—Ç–∏—Ç 50‚ÇΩ —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —Ç—é—Ä—å–º—ã`);
                                movePlayer(dice1.value + dice2.value);
                            } else {
                                // –ù–µ –º–æ–∂–µ—Ç –∑–∞–ø–ª–∞—Ç–∏—Ç—å - –±–∞–Ω–∫—Ä–æ—Ç
                                declareBankruptcy(player, 'bank', 50);
                            }
                        } else {
                            addLog(`${player.name} –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—é—Ä—å–º–µ (—Ö–æ–¥ ${player.jailTurns}/3)`);
                            endTurn();
                        }
                    }
                };
                
                // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ö–æ–¥–∞
                const endTurn = () => {
                    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                    showPropertyModal.value = false;
                    showBuyProperty.value = false;
                    showBuildOptions.value = false;
                    
                    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏–≥—Ä–æ–∫—É
                    let nextIndex = (gameState.value.currentPlayerIndex + 1) % players.value.length;
                    
                    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–∞–Ω–∫—Ä–æ—Ç–æ–≤
                    while (players.value[nextIndex].isBankrupt) {
                        nextIndex = (nextIndex + 1) % players.value.length;
                    }
                    
                    // –°–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                    players.value.forEach((player, index) => {
                        player.isActive = index === nextIndex;
                    });
                    
                    gameState.value.currentPlayerIndex = nextIndex;
                    gameState.value.phase = 'roll';
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã
                    const activePlayers = players.value.filter(p => !p.isBankrupt);
                    if (activePlayers.length === 1) {
                        // –û—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –∏–≥—Ä–æ–∫ - –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
                        winner.value = activePlayers[0];
                        gameState.value.gameOver = true;
                        addLog(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${winner.value.name}!`);
                        return;
                    }
                    
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ö–æ–¥–æ–≤ –µ—Å–ª–∏ –Ω–∞—á–∞–ª—Å—è –Ω–æ–≤—ã–π –∫—Ä—É–≥
                    if (nextIndex === 0) {
                        gameState.value.turn += 1;
                    }
                    
                    currentAction.value = `${activePlayer.value.name}, –±—Ä–æ—Å–∞–π—Ç–µ –∫—É–±–∏–∫–∏!`;
                    
                    // –ï—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π –∏–≥—Ä–æ–∫ - –±–æ—Ç, –¥–µ–ª–∞–µ–º —Ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                    if (!activePlayer.value.isHuman) {
                        setTimeout(() => botTurn(), 1500);
                    }
                };
                
                // –•–æ–¥ –±–æ—Ç–∞
                const botTurn = () => {
                    if (gameState.value.gameOver || activePlayer.value.isBankrupt) return;
                    
                    const bot = activePlayer.value;
                    
                    if (bot.inJail) {
                        botJailAction();
                    } else {
                        // –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–æ–≤
                        dice1.value = Math.floor(Math.random() * 6) + 1;
                        dice2.value = Math.floor(Math.random() * 6) + 1;
                        const total = dice1.value + dice2.value;
                        
                        addLog(`${bot.name} –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫–∏: ${dice1.value} + ${dice2.value} = ${total}`);
                        
                        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
                        movePlayer(total);
                        
                        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–µ—Ç–∫–∏ –±—É–¥–µ—Ç –≤ handleLandOnCell
                    }
                };
                
                // –î–µ–π—Å—Ç–≤–∏–µ –±–æ—Ç–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
                const botAction = () => {
                    const bot = activePlayer.value;
                    const cell = currentCell.value;
                    
                    // –ï—Å–ª–∏ –∫–ª–µ—Ç–∫–∞ —Å–≤–æ–±–æ–¥–Ω–∞, —Ä–µ—à–∞–µ–º –ø–æ–∫—É–ø–∞—Ç—å –ª–∏
                    if (cell.owner === null && (cell.type === 'property' || cell.type === 'railroad' || cell.type === 'utility')) {
                        setTimeout(() => botBuyDecision(), 1000);
                    } else if (cell.owner && cell.owner !== bot.id) {
                        // –û–ø–ª–∞—Ç–∞ –∞—Ä–µ–Ω–¥—ã
                        setTimeout(() => payRent(), 1000);
                    } else {
                        // –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–ª–µ—Ç–∫–∞ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è
                        setTimeout(() => endTurn(), 1000);
                    }
                };
                
                // –†–µ—à–µ–Ω–∏–µ –±–æ—Ç–∞ –æ –ø–æ–∫—É–ø–∫–µ
                const botBuyDecision = () => {
                    const bot = activePlayer.value;
                    const cell = currentCell.value;
                    
                    // –õ–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞
                    let buyProbability = 0.5; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 50%
                    
                    switch (bot.personality) {
                        case 'aggressive':
                            buyProbability = 0.8; // –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –±–æ—Ç—ã —á–∞—â–µ –ø–æ–∫—É–ø–∞—é—Ç
                            break;
                        case 'cautious':
                            buyProbability = 0.3; // –û—Å—Ç–æ—Ä–æ–∂–Ω—ã–µ –±–æ—Ç—ã —Ä–µ–∂–µ –ø–æ–∫—É–ø–∞—é—Ç
                            break;
                        case 'balanced':
                            buyProbability = 0.5;
                            break;
                    }
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
                    if (bot.money < cell.price * 2) {
                        buyProbability *= 0.5; // –ú–µ–Ω—å—à–µ –¥–µ–Ω–µ–≥ - —Ä–µ–∂–µ –ø–æ–∫—É–ø–∞–µ—Ç
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–æ–Ω–æ–ø–æ–ª–∏—é
                    const colorGroup = cell.colorGroup;
                    if (colorGroup) {
                        const propertiesInGroup = boardCells.value.filter(c => 
                            c.colorGroup === colorGroup && c.type === 'property'
                        );
                        const ownedPropertiesInGroup = propertiesInGroup.filter(c => c.owner === bot.id);
                        
                        if (ownedPropertiesInGroup.length > 0) {
                            buyProbability *= 1.5; // –£–∂–µ –µ—Å—Ç—å –∏–º—É—â–µ—Å—Ç–≤–æ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ
                        }
                    }
                    
                    const shouldBuy = Math.random() < buyProbability;
                    
                    if (shouldBuy && bot.money >= cell.price) {
                        buyProperty();
                    } else {
                        // –†–µ—à–∞–µ—Ç –Ω–µ –ø–æ–∫—É–ø–∞—Ç—å –∏–ª–∏ –Ω–µ –º–æ–∂–µ—Ç –∫—É–ø–∏—Ç—å
                        addLog(`${bot.name} —Ä–µ—à–∞–µ—Ç –Ω–µ –ø–æ–∫—É–ø–∞—Ç—å ${cell.name}`);
                        endTurn();
                    }
                };
                
                // –î–µ–π—Å—Ç–≤–∏–µ –±–æ—Ç–∞ –≤ —Ç—é—Ä—å–º–µ
                const botJailAction = () => {
                    const bot = activePlayer.value;
                    
                    // –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–π—Ç–∏ –∏–∑ —Ç—é—Ä—å–º—ã
                    if (bot.getOutOfJailCards > 0) {
                        // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ä—Ç—É –µ—Å–ª–∏ –µ—Å—Ç—å
                        bot.getOutOfJailCards -= 1;
                        bot.inJail = false;
                        addLog(`${bot.name} –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ä—Ç—É "–í—ã—Ö–æ–¥ –∏–∑ —Ç—é—Ä—å–º—ã"`);
                        
                        // –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
                        dice1.value = Math.floor(Math.random() * 6) + 1;
                        dice2.value = Math.floor(Math.random() * 6) + 1;
                        const total = dice1.value + dice2.value;
                        
                        addLog(`${bot.name} –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫–∏: ${dice1.value} + ${dice2.value} = ${total}`);
                        movePlayer(total);
                    } else if (bot.jailTurns >= 2 && bot.money >= 50) {
                        // –ü–ª–∞—Ç–∏—Ç —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –ø–æ—Å–ª–µ 2-—Ö –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
                        bot.money -= 50;
                        bot.inJail = false;
                        bot.jailTurns = 0;
                        addLog(`${bot.name} –ø–ª–∞—Ç–∏—Ç 50‚ÇΩ —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —Ç—é—Ä—å–º—ã`);
                        
                        dice1.value = Math.floor(Math.random() * 6) + 1;
                        dice2.value = Math.floor(Math.random() * 6) + 1;
                        const total = dice1.value + dice2.value;
                        
                        addLog(`${bot.name} –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫–∏: ${dice1.value} + ${dice2.value} = ${total}`);
                        movePlayer(total);
                    } else {
                        // –ü—ã—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–æ—Å–∏—Ç—å –¥—É–±–ª—å
                        dice1.value = Math.floor(Math.random() * 6) + 1;
                        dice2.value = Math.floor(Math.random() * 6) + 1;
                        
                        addLog(`${bot.name} –≤ —Ç—é—Ä—å–º–µ –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫–∏: ${dice1.value} + ${dice2.value}`);
                        
                        if (dice1.value === dice2.value) {
                            // –í—ã—à–µ–ª
                            bot.inJail = false;
                            bot.jailTurns = 0;
                            addLog(`${bot.name} –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –¥—É–±–ª—å –∏ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ç—é—Ä—å–º—ã!`);
                            movePlayer(dice1.value + dice2.value);
                        } else {
                            // –û—Å—Ç–∞–µ—Ç—Å—è
                            bot.jailTurns += 1;
                            addLog(`${bot.name} –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç—é—Ä—å–º–µ (—Ö–æ–¥ ${bot.jailTurns}/3)`);
                            endTurn();
                        }
                    }
                };
                
                // –û–±—ä—è–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞
                const declareBankruptcy = (player, debtTo, amount) => {
                    player.isBankrupt = true;
                    bankruptPlayer.value = {
                        id: player.id,
                        name: player.name,
                        debtTo: debtTo,
                        amount: amount
                    };
                    
                    addLog(`${player.name} –æ–±—ä—è–≤–ª—è–µ—Ç –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ! –î–æ–ª–≥: ${amount}‚ÇΩ`);
                    
                    // –ü–µ—Ä–µ–¥–∞—á–∞ –∏–º—É—â–µ—Å—Ç–≤–∞
                    if (debtTo === 'bank') {
                        // –ò–º—É—â–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –±–∞–Ω–∫—É
                        player.properties.forEach(propertyId => {
                            const property = boardCells.value.find(c => c.id === propertyId);
                            if (property) {
                                property.owner = null;
                                property.houses = 0;
                                property.hotel = false;
                                property.mortgaged = false;
                            }
                        });
                    } else {
                        // –ò–º—É—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫—Ä–µ–¥–∏—Ç–æ—Ä—É
                        const creditor = players.value.find(p => p.id === debtTo);
                        if (creditor) {
                            player.properties.forEach(propertyId => {
                                const property = boardCells.value.find(c => c.id === propertyId);
                                if (property) {
                                    property.owner = creditor.id;
                                    creditor.properties.push(propertyId);
                                }
                            });
                        }
                    }
                    
                    player.properties = [];
                    showBankruptcyModal.value = true;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã
                    setTimeout(() => {
                        const activePlayers = players.value.filter(p => !p.isBankrupt);
                        if (activePlayers.length === 1) {
                            winner.value = activePlayers[0];
                            gameState.value.gameOver = true;
                            addLog(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${winner.value.name}!`);
                        }
                    }, 2000);
                };
                
                // –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ–º–æ–≤
                const buildHouse = () => {
                    const cell = currentCell.value;
                    const player = activePlayer.value;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
                    if (cell.hotel) {
                        addLog('–û—Ç–µ–ª—å —É–∂–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω!');
                        return;
                    }
                    
                    if (cell.houses === 4) {
                        // –°—Ç—Ä–æ–∏–º –æ—Ç–µ–ª—å
                        if (player.money >= cell.housePrice) {
                            player.money -= cell.housePrice;
                            cell.hotel = true;
                            addLog(`${player.name} —Å—Ç—Ä–æ–∏—Ç –æ—Ç–µ–ª—å –Ω–∞ ${cell.name} –∑–∞ ${cell.housePrice}‚ÇΩ`);
                        }
                    } else {
                        // –°—Ç—Ä–æ–∏–º –¥–æ–º
                        if (player.money >= cell.housePrice) {
                            player.money -= cell.housePrice;
                            cell.houses += 1;
                            addLog(`${player.name} —Å—Ç—Ä–æ–∏—Ç –¥–æ–º –Ω–∞ ${cell.name} –∑–∞ ${cell.housePrice}‚ÇΩ (–≤—Å–µ–≥–æ ${cell.houses})`);
                        }
                    }
                    
                    closePropertyModal();
                };
                
                // –ó–∞–ª–æ–≥/–≤—ã–∫—É–ø –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
                const toggleMortgage = () => {
                    const cell = currentCell.value;
                    const player = activePlayer.value;
                    
                    if (cell.mortgaged) {
                        // –í—ã–∫—É–ø
                        const cost = Math.floor(cell.price * 0.55); // –í—ã–∫—É–ø –ø–æ 110% –æ—Ç –∑–∞–ª–æ–≥–∞
                        if (player.money >= cost) {
                            player.money -= cost;
                            cell.mortgaged = false;
                            addLog(`${player.name} –≤—ã–∫—É–ø–∞–µ—Ç ${cell.name} –∑–∞ ${cost}‚ÇΩ`);
                        }
                    } else {
                        // –ó–∞–ª–æ–≥
                        const amount = Math.floor(cell.price / 2);
                        player.money += amount;
                        cell.mortgaged = true;
                        addLog(`${player.name} –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç ${cell.name} –∏ –ø–æ–ª—É—á–∞–µ—Ç ${amount}‚ÇΩ`);
                    }
                    
                    closePropertyModal();
                };
                
                // –ü—Ä–æ–¥–∞–∂–∞ –¥–æ–º–æ–≤
                const sellHouse = () => {
                    const cell = currentCell.value;
                    const player = activePlayer.value;
                    
                    if (cell.hotel) {
                        // –ü—Ä–æ–¥–∞–∂–∞ –æ—Ç–µ–ª—è
                        const sellPrice = Math.floor(cell.housePrice / 2);
                        player.money += sellPrice;
                        cell.hotel = false;
                        addLog(`${player.name} –ø—Ä–æ–¥–∞–µ—Ç –æ—Ç–µ–ª—å –Ω–∞ ${cell.name} –∑–∞ ${sellPrice}‚ÇΩ`);
                    } else if (cell.houses > 0) {
                        // –ü—Ä–æ–¥–∞–∂–∞ –¥–æ–º–∞
                        const sellPrice = Math.floor(cell.housePrice / 2);
                        player.money += sellPrice;
                        cell.houses -= 1;
                        addLog(`${player.name} –ø—Ä–æ–¥–∞–µ—Ç –¥–æ–º –Ω–∞ ${cell.name} –∑–∞ ${sellPrice}‚ÇΩ (–æ—Å—Ç–∞–ª–æ—Å—å ${cell.houses})`);
                    }
                    
                    closePropertyModal();
                };
                
                // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
                const openBuildModal = () => {
                    showPropertyModal.value = true;
                };
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
                const closePropertyModal = () => {
                    showPropertyModal.value = false;
                };
                
                // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
                const openTradeModal = () => {
                    // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
                    const potentialPartners = players.value.filter(p => 
                        p.id !== activePlayer.value.id && !p.isBankrupt && p.properties.length > 0
                    );
                    
                    if (potentialPartners.length > 0) {
                        tradePartner.value = potentialPartners[Math.floor(Math.random() * potentialPartners.length)];
                        tradeOffer.value = {
                            moneyFromPlayer: 0,
                            moneyToPlayer: 0,
                            propertiesFromPlayer: [],
                            propertiesToPlayer: []
                        };
                        showTradeModal.value = true;
                    }
                };
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
                const closeTradeModal = () => {
                    showTradeModal.value = false;
                    tradePartner.value = null;
                };
                
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ
                const toggleTradeProperty = (propertyId, side) => {
                    const array = side === 'fromPlayer' ? tradeOffer.value.propertiesFromPlayer : tradeOffer.value.propertiesToPlayer;
                    const index = array.indexOf(propertyId);
                    
                    if (index === -1) {
                        array.push(propertyId);
                    } else {
                        array.splice(index, 1);
                    }
                };
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ—Ä–≥–æ–≤–ª–µ
                const sendTradeOffer = () => {
                    // –í —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –±–æ—Ç—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
                    if (tradePartner.value) {
                        // –ü–µ—Ä–µ–¥–∞—á–∞ –¥–µ–Ω–µ–≥
                        activePlayer.value.money -= tradeOffer.value.moneyFromPlayer;
                        activePlayer.value.money += tradeOffer.value.moneyToPlayer;
                        tradePartner.value.money += tradeOffer.value.moneyFromPlayer;
                        tradePartner.value.money -= tradeOffer.value.moneyToPlayer;
                        
                        // –ü–µ—Ä–µ–¥–∞—á–∞ —Å–≤–æ–π—Å—Ç–≤ –æ—Ç –∏–≥—Ä–æ–∫–∞
                        tradeOffer.value.propertiesFromPlayer.forEach(propertyId => {
                            const property = boardCells.value.find(c => c.id === propertyId);
                            if (property) {
                                property.owner = tradePartner.value.id;
                                const playerIndex = activePlayer.value.properties.indexOf(propertyId);
                                if (playerIndex !== -1) {
                                    activePlayer.value.properties.splice(playerIndex, 1);
                                    tradePartner.value.properties.push(propertyId);
                                }
                            }
                        });
                        
                        // –ü–µ—Ä–µ–¥–∞—á–∞ —Å–≤–æ–π—Å—Ç–≤ –∏–≥—Ä–æ–∫—É
                        tradeOffer.value.propertiesToPlayer.forEach(propertyId => {
                            const property = boardCells.value.find(c => c.id === propertyId);
                            if (property) {
                                property.owner = activePlayer.value.id;
                                const partnerIndex = tradePartner.value.properties.indexOf(propertyId);
                                if (partnerIndex !== -1) {
                                    tradePartner.value.properties.splice(partnerIndex, 1);
                                    activePlayer.value.properties.push(propertyId);
                                }
                            }
                        });
                        
                        addLog(`${activePlayer.value.name} –∏ ${tradePartner.value.name} —Å–æ–≤–µ—Ä—à–∞—é—Ç —Å–¥–µ–ª–∫—É!`);
                        closeTradeModal();
                    }
                };
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞
                const closeBankruptcyModal = () => {
                    showBankruptcyModal.value = false;
                    bankruptPlayer.value = null;
                    endTurn();
                };
                
                // –ù–æ–≤–∞—è –∏–≥—Ä–∞
                const resetGame = () => {
                    // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
                    gameState.value.started = false;
                    gameState.value.gameOver = false;
                    gameState.value.turn = 0;
                    gameState.value.currentPlayerIndex = 0;
                    gameState.value.phase = 'roll';
                    
                    // –°–±—Ä–æ—Å –∏–≥—Ä–æ–∫–æ–≤
                    players.value.forEach(player => {
                        player.money = START_MONEY;
                        player.positionIndex = 0;
                        player.position = { x: 650, y: 650 };
                        player.properties = [];
                        player.isActive = false;
                        player.inJail = false;
                        player.jailTurns = 0;
                        player.getOutOfJailCards = 0;
                        player.isBankrupt = false;
                        updatePlayerPosition(player);
                    });
                    
                    // –°–±—Ä–æ—Å –ø–æ–ª—è
                    boardCells.value.forEach(cell => {
                        cell.owner = null;
                        cell.houses = 0;
                        cell.hotel = false;
                        cell.mortgaged = false;
                    });
                    
                    // –°–±—Ä–æ—Å –ª–æ–≥–∞
                    gameLog.value = ['–ì–æ—Ç–æ–≤–∞ –Ω–æ–≤–∞—è –∏–≥—Ä–∞! –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É".'];
                    currentAction.value = '–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"';
                    
                    addLog('–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞. –ì–æ—Ç–æ–≤—ã –∫ –Ω–æ–≤–æ–π –ø–∞—Ä—Ç–∏–∏!');
                };
                
                // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
                const addLog = (message) => {
                    const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                    gameLog.value.push(`[${timestamp}] ${message}`);
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ª–æ–≥ 50 –∑–∞–ø–∏—Å—è–º–∏
                    if (gameLog.value.length > 50) {
                        gameLog.value.shift();
                    }
                };
                
                const getCellName = (index) => {
                    const cell = boardCells.value.find(c => c.id === index);
                    return cell ? cell.name : `–ö–ª–µ—Ç–∫–∞ ${index}`;
                };
                
                const getPlayerColor = (playerId) => {
                    const player = players.value.find(p => p.id === playerId);
                    return player ? player.color : '#000';
                };
                
                const getPlayerName = (playerId) => {
                    const player = players.value.find(p => p.id === playerId);
                    return player ? player.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                };
                
                const getPropertyColor = (propertyId) => {
                    const property = boardCells.value.find(c => c.id === propertyId);
                    if (!property) return '#ccc';
                    
                    const colorMap = {
                        'brown': '#8b4513',
                        'light-blue': '#87ceeb',
                        'pink': '#ff69b4',
                        'orange': '#ffa500',
                        'red': '#ff4444',
                        'yellow': '#ffff00',
                        'green': '#90ee90',
                        'dark-blue': '#4169e1'
                    };
                    
                    return colorMap[property.colorGroup] || '#ccc';
                };
                
                const getPropertyShortName = (propertyId) => {
                    const property = boardCells.value.find(c => c.id === propertyId);
                    if (!property) return '???';
                    
                    // –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
                    return property.name.split(' ')[0];
                };
                
                const getAvailablePropertiesCount = () => {
                    return boardCells.value.filter(c => 
                        (c.type === 'property' || c.type === 'railroad' || c.type === 'utility') && !c.owner
                    ).length;
                };
                
                const canRoll = computed(() => {
                    return gameState.value.started && 
                           !gameState.value.gameOver && 
                           activePlayer.value.isHuman && 
                           gameState.value.phase === 'roll' &&
                           !activePlayer.value.isBankrupt;
                });
                
                const canTrade = computed(() => {
                    return gameState.value.started && 
                           !gameState.value.gameOver && 
                           activePlayer.value.isHuman &&
                           !activePlayer.value.isBankrupt &&
                           players.value.filter(p => !p.isBankrupt && p.id !== activePlayer.value.id).length > 0;
                });
                
                const canBuildOnCurrentProperty = computed(() => {
                    if (!currentCell.value.owner || currentCell.value.owner !== activePlayer.value.id) return false;
                    if (currentCell.value.type !== 'property') return false;
                    if (currentCell.value.mortgaged) return false;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–æ–Ω–æ–ø–æ–ª–∏—é
                    const colorGroup = currentCell.value.colorGroup;
                    const allPropertiesInGroup = boardCells.value.filter(c => 
                        c.colorGroup === colorGroup && c.type === 'property'
                    );
                    const ownedPropertiesInGroup = allPropertiesInGroup.filter(c => c.owner === activePlayer.value.id);
                    
                    if (allPropertiesInGroup.length !== ownedPropertiesInGroup.length) return false;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ (–Ω–µ–ª—å–∑—è —Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —É–ª–∏—Ü–µ –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ –¥—Ä—É–≥–∏—Ö)
                    const minHouses = Math.min(...ownedPropertiesInGroup.map(p => p.houses));
                    const maxHouses = Math.max(...ownedPropertiesInGroup.map(p => p.houses));
                    
                    if (currentCell.value.hotel) return false; // –û—Ç–µ–ª—å —É–∂–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω
                    if (currentCell.value.houses === 4 && maxHouses === 4) return true; // –ú–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–µ–ª—å
                    if (currentCell.value.houses > minHouses) return false; // –£–∂–µ –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ –¥—Ä—É–≥–∏—Ö
                    
                    return true;
                });
                
                const isTradeOfferValid = computed(() => {
                    return tradeOffer.value.moneyFromPlayer <= activePlayer.value.money &&
                           tradeOffer.value.moneyToPlayer <= (tradePartner.value?.money || 0) &&
                           (tradeOffer.value.moneyFromPlayer > 0 || 
                            tradeOffer.value.moneyToPlayer > 0 || 
                            tradeOffer.value.propertiesFromPlayer.length > 0 || 
                            tradeOffer.value.propertiesToPlayer.length > 0);
                });
                
                // –ö–∞—Ä—Ç—ã —à–∞–Ω—Å–∞ –∏ –∫–∞–∑–Ω—ã
                const chanceCards = [
                    { text: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –Ω–∞ "–°—Ç–∞—Ä—Ç"', action: 'move', position: 0 },
                    { text: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –Ω–∞ "–ë–µ–ª–∞—è —É–ª–∏—Ü–∞"', action: 'move', position: 1 },
                    { text: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –Ω–∞ "–í–æ–∫–∑–∞–ª –Æ–∂–Ω—ã–π"', action: 'move', position: 5 },
                    { text: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –≤ —Ç—é—Ä—å–º—É', action: 'jail' },
                    { text: '–ü–æ–ª—É—á–∏—Ç–µ 50‚ÇΩ', action: 'collect', amount: 50 },
                    { text: '–ó–∞–ø–ª–∞—Ç–∏—Ç–µ 50‚ÇΩ', action: 'pay', amount: 50 },
                    { text: '–ü–æ–ª—É—á–∏—Ç–µ 100‚ÇΩ', action: 'collect', amount: 100 },
                    { text: '–ó–∞–ø–ª–∞—Ç–∏—Ç–µ 100‚ÇΩ', action: 'pay', amount: 100 }
                ];
                
                const communityChestCards = [
                    { text: '–ü–æ–ª—É—á–∏—Ç–µ 200‚ÇΩ', action: 'collect', amount: 200 },
                    { text: '–ó–∞–ø–ª–∞—Ç–∏—Ç–µ 200‚ÇΩ', action: 'pay', amount: 200 },
                    { text: '–ü–æ–ª—É—á–∏—Ç–µ 100‚ÇΩ', action: 'collect', amount: 100 },
                    { text: '–ó–∞–ø–ª–∞—Ç–∏—Ç–µ 100‚ÇΩ', action: 'pay', amount: 100 },
                    { text: '–ü–æ–ª—É—á–∏—Ç–µ 50‚ÇΩ', action: 'collect', amount: 50 },
                    { text: '–ó–∞–ø–ª–∞—Ç–∏—Ç–µ 50‚ÇΩ', action: 'pay', amount: 50 },
                    { text: '–í—ã—Ö–æ–¥ –∏–∑ —Ç—é—Ä—å–º—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ', action: 'getoutofjail' },
                    { text: '–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –Ω–∞ "–°—Ç–∞—Ä—Ç"', action: 'move', position: 0 }
                ];
                
                // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
                const handleKeyPress = (e) => {
                    if (!gameState.value.started || gameState.value.gameOver) return;
                    
                    if (activePlayer.value.isHuman && !activePlayer.value.isBankrupt) {
                        switch (e.key.toLowerCase()) {
                            case ' ':
                            case 'r':
                                if (canRoll.value) rollDice();
                                break;
                            case 'b':
                                if (showBuyProperty.value) buyProperty();
                                break;
                            case 'enter':
                            case 'e':
                                if (gameState.value.phase === 'action') endTurn();
                                break;
                            case 't':
                                if (canTrade.value) openTradeModal();
                                break;
                        }
                    }
                };
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                onMounted(() => {
                    initializeBoard();
                    window.addEventListener('keydown', handleKeyPress);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
                    players.value.forEach(player => {
                        updatePlayerPosition(player);
                    });
                });
                
                return {
                    // –î–∞–Ω–Ω—ã–µ
                    gameState,
                    players,
                    boardCells,
                    dice1,
                    dice2,
                    currentAction,
                    gameLog,
                    botDifficulty,
                    bankMoney,
                    showPropertyModal,
                    showTradeModal,
                    showBankruptcyModal,
                    showBuyProperty,
                    showBuildOptions,
                    tradePartner,
                    tradeOffer,
                    bankruptPlayer,
                    winner,
                    currentCell,
                    activePlayer,
                    
                    // –ú–µ—Ç–æ–¥—ã
                    startGame,
                    rollDice,
                    buyProperty,
                    startAuction,
                    endTurn,
                    openBuildModal,
                    buildHouse,
                    toggleMortgage,
                    sellHouse,
                    openTradeModal,
                    closeTradeModal,
                    toggleTradeProperty,
                    sendTradeOffer,
                    closePropertyModal,
                    closeBankruptcyModal,
                    resetGame,
                    getCellStyle,
                    getCellName,
                    getPlayerColor,
                    getPlayerName,
                    getPropertyColor,
                    getPropertyShortName,
                    getCurrentRent,
                    getAvailablePropertiesCount,
                    
                    // –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
                    canRoll,
                    canTrade,
                    canBuildOnCurrentProperty,
                    isTradeOfferValid
                };
            }
        }).mount('#app');
    </script>
</body>
</html>