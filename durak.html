<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
         <link rel="icon" href="img/chip.png" type="image/png">

     <link rel="icon" href="https://example.com/path/to/casino-icon.png" type="image/png">
    <title>–ö–∞—Ä—Ç–æ—á–Ω—ã–π –î—É—Ä–∞–∫</title>
    <script src="https://unpkg.com/vue@2/dist/vue.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a5f1a 0%, #0d3d0d 100%);
            color: white;
            text-align: center;
            padding: 3%;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 2%;
            width: 100%;
        }

        h1 {
            font-size: clamp(1.8rem, 8vw, 3rem);
            margin: 2% 0;
            color: gold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }

        .game-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 3% 2%;
            border-radius: 15px;
            margin: 2% 0;
            border: 2px solid gold;
            width: 100%;
        }

        .info-row {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 2% 0;
        }

        .info-item {
            font-size: clamp(1rem, 4vw, 1.3rem);
            margin: 1% 0;
        }

        .trump-card {
            display: inline-block;
            width: 50px;
            height: 70px;
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: 2px solid white;
            border-radius: 8px;
            margin-left: 10px;
            vertical-align: middle;
            line-height: 70px;
            font-size: 1.5rem;
        }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-board {
            background: rgba(0, 0, 0, 0.3);
            padding: 4% 3%;
            border-radius: 20px;
            margin: 3% 0;
            border: 3px solid #8B4513;
            width: 100%;
        }

        /* –ö–∞—Ä—Ç—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ */
        .computer-cards {
            margin: 3% 0;
            min-height: 80px;
        }

        .computer-card {
            display: inline-block;
            width: 60px;
            height: 90px;
            background: linear-gradient(145deg, #ff6b6b, #c0392b);
            border: 2px solid white;
            border-radius: 8px;
            margin: 0 -20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        /* –ü–æ–ª–µ –±–∏—Ç–≤—ã */
        .battle-field {
            margin: 4% 0;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            background: rgba(139, 69, 19, 0.2);
            padding: 3%;
            border-radius: 15px;
        }

        .attack-row, .defense-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .card-pair {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            margin: 0 5px;
        }

        /* –ö–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞ */
        .player-cards {
            margin: 3% 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            padding: 2%;
        }

        .card {
            width: 70px;
            height: 100px;
            background: linear-gradient(145deg, #4a90e2, #357abd);
            border: 2px solid white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 8% 5%;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        .card.selected {
            transform: translateY(-10px);
            border-color: gold;
            box-shadow: 0 0 20px gold;
        }

        .card.can-throw {
            border-color: #ffa500;
            box-shadow: 0 0 15px #ffa500;
        }

        .card.red {
            background: linear-gradient(145deg, #ff6b6b, #c0392b);
            color: white;
        }

        .card.black {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            color: white;
        }

        .card.trump {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            color: #000;
            border-color: #ffa500;
        }

        .card-value {
            font-size: 1.4rem;
            font-weight: 900;
        }

        .card-suit {
            font-size: 1.8rem;
        }

        .battle-card {
            width: 65px;
            height: 95px;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            margin: 4% 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
        }

        .control-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            width: 100%;
        }

        button {
            background: linear-gradient(145deg, gold, #ffd700);
            border: none;
            padding: 4% 8%;
            font-size: clamp(1rem, 4vw, 1.3rem);
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            color: #000;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            min-width: 140px;
            min-height: 50px;
            flex: 1;
        }

        button:hover {
            background: linear-gradient(145deg, #ffd700, gold);
            transform: translateY(-2px);
        }

        button:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
        }

        .attack-btn {
            background: linear-gradient(145deg, #ff6b6b, #c0392b);
            color: white;
        }

        .defend-btn {
            background: linear-gradient(145deg, #4a90e2, #357abd);
            color: white;
        }

        .throw-btn {
            background: linear-gradient(145deg, #ffa500, #ff8c00);
            color: white;
        }

        .take-btn {
            background: linear-gradient(145deg, #27ae60, #229954);
            color: white;
        }

        .pass-btn {
            background: linear-gradient(145deg, #95a5a6, #7f8c8d);
            color: white;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message {
            font-size: clamp(1.1rem, 5vw, 1.6rem);
            margin: 3% 0;
            padding: 3% 4%;
            background: rgba(0,0,0,0.5);
            border-radius: 12px;
            border: 2px solid gold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .win-message {
            color: gold;
            animation: blink 1s infinite;
            background: rgba(255,215,0,0.1);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 480px) {
            .card {
                width: 60px;
                height: 85px;
            }

            .battle-card {
                width: 55px;
                height: 80px;
            }

            .computer-card {
                width: 50px;
                height: 75px;
                margin: 0 -15px;
            }

            .player-cards {
                gap: 6px;
            }

            button {
                min-width: 120px;
                padding: 5% 6%;
            }

            .control-row {
                gap: 8px;
            }
        }

        @media (max-width: 360px) {
            .card {
                width: 55px;
                height: 78px;
            }

            .battle-card {
                width: 50px;
                height: 72px;
            }

            .computer-card {
                width: 45px;
                height: 68px;
                margin: 0 -12px;
            }

            button {
                min-width: 100px;
                font-size: 0.9rem;
            }
        }

        /* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto auto;
                gap: 10px;
            }

            h1 { grid-column: 1 / -1; }
            .game-info { grid-column: 1 / -1; }
            .computer-cards { grid-column: 1 / -1; }
            .battle-field { grid-column: 1 / -1; }
            .player-cards { grid-column: 1; }
            .controls { grid-column: 2; }
            .message { grid-column: 1 / -1; }

            .player-cards {
                flex-direction: column;
                align-items: center;
                max-height: 300px;
                overflow-y: auto;
            }

            .card {
                width: 50px;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <h1>üé¥ –ö–∞—Ä—Ç–æ—á–Ω—ã–π –î—É—Ä–∞–∫ üé¥</h1>
            
            <div class="game-info">
                <div class="info-row">
                    <div class="info-item">–ö–æ–ª–æ–¥–∞: {{ deckCount }}</div>
                    <div class="info-item">
                        –ö–æ–∑—ã—Ä—å: {{ trumpSuit }}
                        <div class="trump-card">{{ trumpSuit }}</div>
                    </div>
                </div>
                <div class="info-row">
                    <div class="info-item">–í–∞—à–∏ –∫–∞—Ä—Ç—ã: {{ playerCards.length }}</div>
                    <div class="info-item">–ö–∞—Ä—Ç—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: {{ computerCards.length }}</div>
                </div>
                <div class="info-row" v-if="currentAttacker">
                    <div class="info-item">–•–æ–¥–∏—Ç: {{ currentAttacker === 'player' ? '–í—ã' : '–ö–æ–º–ø—å—é—Ç–µ—Ä' }}</div>
                </div>
            </div>

            <div class="game-board">
                <!-- –ö–∞—Ä—Ç—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ -->
                <div class="computer-cards">
                    <div v-for="n in computerCards.length" :key="'comp-'+n" 
                         class="computer-card"></div>
                </div>

                <!-- –ü–æ–ª–µ –±–∏—Ç–≤—ã -->
                <div class="battle-field">
                    <div class="attack-row">
                        <div v-for="(pair, pairIndex) in battlePairs" :key="'pair-'+pairIndex" 
                             class="card-pair">
                            <div class="card battle-card" 
                                 :class="[pair.attack.suit === '‚ô•' || pair.attack.suit === '‚ô¶' ? 'red' : 'black',
                                 { trump: pair.attack.suit === trumpSuit }]">
                                <div class="card-value">{{ pair.attack.value }}</div>
                                <div class="card-suit">{{ pair.attack.suit }}</div>
                            </div>
                            <div v-if="pair.defend" class="card battle-card" 
                                 :class="[pair.defend.suit === '‚ô•' || pair.defend.suit === '‚ô¶' ? 'red' : 'black',
                                 { trump: pair.defend.suit === trumpSuit }]">
                                <div class="card-value">{{ pair.defend.value }}</div>
                                <div class="card-suit">{{ pair.defend.suit }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ö–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞ -->
                <div class="player-cards">
                    <div v-for="(card, index) in playerCards" :key="'player-'+index" 
                         class="card" 
                         :class="[card.suit === '‚ô•' || card.suit === '‚ô¶' ? 'red' : 'black',
                         { 
                             selected: selectedCardIndex === index,
                             'can-throw': canThrowCards.includes(index),
                             trump: card.suit === trumpSuit
                         }]"
                         @click="selectCard(index)">
                        <div class="card-value">{{ card.value }}</div>
                        <div class="card-suit">{{ card.suit }}</div>
                    </div>
                </div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="controls">
                <div class="control-row">
                    <button v-if="canAttack" @click="attack" 
                            :disabled="selectedCardIndex === null" class="attack-btn">
                        –ê—Ç–∞–∫–æ–≤–∞—Ç—å
                    </button>
                    <button v-if="canDefend" @click="defend" 
                            :disabled="selectedCardIndex === null" class="defend-btn">
                        –ó–∞—â–∏—Ç–∏—Ç—å—Å—è
                    </button>
                    <button v-if="canThrow" @click="throwCard" 
                            :disabled="selectedCardIndex === null" class="throw-btn">
                        –ü–æ–¥–∫–∏–Ω—É—Ç—å
                    </button>
                </div>
                <div class="control-row">
                    <button v-if="canTake" @click="takeCards" class="take-btn">
                        –í–∑—è—Ç—å –∫–∞—Ä—Ç—ã
                    </button>
                    <button v-if="canPass" @click="passMove" class="pass-btn">
                        –ë–∏—Ç–æ
                    </button>
                    <button v-if="gameOver" @click="newGame" class="attack-btn">
                        –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="message" :class="{ 'win-message': gameOver }">
                {{ gameMessage }}
            </div>
        </div>
    </div>

    <script>
       
     new Vue({
    el: '#app',
    data: {
        deck: [],
        playerCards: [],
        computerCards: [],
        battlePairs: [], // { attack: card, defend: card }
        trumpSuit: '',
        currentAttacker: 'player', // 'player' –∏–ª–∏ 'computer'
        selectedCardIndex: null,
        gameOver: false,
        gameMessage: '–í–∞—à —Ö–æ–¥! –ê—Ç–∞–∫—É–π—Ç–µ –∫–∞—Ä—Ç–æ–π',
        deckCount: 36,
        canThrowCards: []
    },
    computed: {
        canAttack() {
            return !this.gameOver && 
                   this.currentAttacker === 'player' && 
                   this.battlePairs.length === 0;
        },
        canDefend() {
            // –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∑–∞—â–∏—â–∞—Ç—å—Å—è –∫–æ–≥–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –∞—Ç–∞–∫—É–µ—Ç –∏ –µ—Å—Ç—å –Ω–µ–æ—Ç–±–∏—Ç—ã–µ –∫–∞—Ä—Ç—ã
            return !this.gameOver && 
                   this.currentAttacker === 'computer' && 
                   this.battlePairs.length > 0 &&
                   this.battlePairs.some(pair => !pair.defend);
        },
        canThrow() {
            return !this.gameOver && 
                   this.currentAttacker === 'player' && 
                   this.battlePairs.length > 0 &&
                   this.battlePairs.every(pair => pair.defend) &&
                   this.battlePairs.length < 6;
        },
        canTake() {
            // –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –∫–∞—Ä—Ç—ã –∫–æ–≥–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –∞—Ç–∞–∫—É–µ—Ç –∏ –µ—Å—Ç—å –Ω–µ–æ—Ç–±–∏—Ç—ã–µ –∫–∞—Ä—Ç—ã
            return !this.gameOver && 
                   this.currentAttacker === 'computer' && 
                   this.battlePairs.length > 0 &&
                   this.battlePairs.some(pair => !pair.defend);
        },
        canPass() {
            return !this.gameOver && 
                   this.currentAttacker === 'player' && 
                   this.battlePairs.length > 0 &&
                   this.battlePairs.every(pair => pair.defend);
        }
    },
    created() {
        this.newGame();
    },
    methods: {
        newGame() {
            this.initializeDeck();
            this.shuffleDeck();
            this.dealCards();
            this.setTrump();
            this.currentAttacker = 'player';
            this.selectedCardIndex = null;
            this.battlePairs = [];
            this.gameOver = false;
            this.gameMessage = '–í–∞—à —Ö–æ–¥! –ê—Ç–∞–∫—É–π—Ç–µ –∫–∞—Ä—Ç–æ–π';
            this.deckCount = this.deck.length;
            this.canThrowCards = [];
        },

        initializeDeck() {
            const suits = ['‚ô•', '‚ô¶', '‚ô£', '‚ô†'];
            const values = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            this.deck = [];
            
            for (let suit of suits) {
                for (let value of values) {
                    this.deck.push({ suit, value });
                }
            }
        },

        shuffleDeck() {
            for (let i = this.deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
            }
        },

        dealCards() {
            this.playerCards = [];
            this.computerCards = [];
            
            // –†–∞–∑–¥–∞—á–∞ –ø–æ 6 –∫–∞—Ä—Ç
            for (let i = 0; i < 6; i++) {
                if (this.deck.length > 0) {
                    this.playerCards.push(this.deck.pop());
                }
                if (this.deck.length > 0) {
                    this.computerCards.push(this.deck.pop());
                }
            }
        },

        setTrump() {
            if (this.deck.length > 0) {
                const trumpCard = this.deck[this.deck.length - 1];
                this.trumpSuit = trumpCard.suit;
            }
        },

        selectCard(index) {
            if (this.gameOver) return;
            
            const card = this.playerCards[index];
            
            if (this.canAttack && this.battlePairs.length === 0) {
                // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞ - –º–æ–∂–Ω–æ —Ö–æ–¥–∏—Ç—å –ª—é–±–æ–π –∫–∞—Ä—Ç–æ–π
                this.selectedCardIndex = index;
            } 
            else if (this.canAttack && this.battlePairs.length > 0) {
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ - –º–æ–∂–Ω–æ –ø–æ–¥–∫–∏–¥—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç—ã —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ —É–∂–µ –Ω–∞ —Å—Ç–æ–ª–µ
                const tableValues = this.battlePairs.map(pair => pair.attack.value);
                if (tableValues.includes(card.value)) {
                    this.selectedCardIndex = index;
                }
            }
            else if (this.canDefend) {
                // –ó–∞—â–∏—Ç–∞ - –º–æ–∂–Ω–æ –±–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç–æ–π
                const undefendedPair = this.battlePairs.find(pair => !pair.defend);
                if (undefendedPair && this.canDefendWith(card, undefendedPair.attack)) {
                    this.selectedCardIndex = index;
                } else {
                    this.selectedCardIndex = null;
                }
            }
            else if (this.canThrow) {
                // –ü–æ–¥–∫–∏–¥—ã–≤–∞–Ω–∏–µ - –º–æ–∂–Ω–æ –ø–æ–¥–∫–∏–¥—ã–≤–∞—Ç—å –∫–∞—Ä—Ç—ã —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –Ω–∞ —Å—Ç–æ–ª–µ
                const tableValues = this.getAllTableValues();
                if (tableValues.includes(card.value)) {
                    this.selectedCardIndex = index;
                }
            }
            
            this.updateThrowableCards();
        },

        updateThrowableCards() {
            this.canThrowCards = [];
            if (this.canThrow) {
                const tableValues = this.getAllTableValues();
                this.playerCards.forEach((card, index) => {
                    if (tableValues.includes(card.value) && index !== this.selectedCardIndex) {
                        this.canThrowCards.push(index);
                    }
                });
            }
        },

        getAllTableValues() {
            const values = [];
            this.battlePairs.forEach(pair => {
                values.push(pair.attack.value);
                if (pair.defend) {
                    values.push(pair.defend.value);
                }
            });
            return [...new Set(values)]; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        },

        canDefendWith(defendingCard, attackingCard) {
            // –ö–∞—Ä—Ç–∞ –º–æ–∂–µ—Ç –ø–æ–±–∏—Ç—å –µ—Å–ª–∏:
            // 1. –¢–∞ –∂–µ –º–∞—Å—Ç—å –∏ –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            // 2. –ö–æ–∑—ã—Ä—å (–µ—Å–ª–∏ –∞—Ç–∞–∫—É—é—â–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –∫–æ–∑—ã—Ä—å)
            const isTrump = defendingCard.suit === this.trumpSuit;
            const attackingIsTrump = attackingCard.suit === this.trumpSuit;
            
            if (isTrump && !attackingIsTrump) return true;
            if (defendingCard.suit === attackingCard.suit) {
                return this.getCardValue(defendingCard) > this.getCardValue(attackingCard);
            }
            return false;
        },

        getCardValue(card) {
            const values = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
            return values.indexOf(card.value);
        },

        attack() {
            if (this.selectedCardIndex === null) return;
            
            const card = this.playerCards[this.selectedCardIndex];
            this.battlePairs.push({ attack: card, defend: null });
            this.playerCards.splice(this.selectedCardIndex, 1);
            this.selectedCardIndex = null;
            this.canThrowCards = [];
            
            this.currentAttacker = 'computer';
            this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞—â–∏—â–∞–µ—Ç—Å—è...';
            
            setTimeout(() => {
                this.computerDefend();
            }, 1500);
        },

        defend() {
            if (this.selectedCardIndex === null) return;
            
            const card = this.playerCards[this.selectedCardIndex];
            const undefendedPair = this.battlePairs.find(pair => !pair.defend);
            
            if (undefendedPair && this.canDefendWith(card, undefendedPair.attack)) {
                undefendedPair.defend = card;
                this.playerCards.splice(this.selectedCardIndex, 1);
                this.selectedCardIndex = null;
                this.canThrowCards = [];
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –∫–∞—Ä—Ç—ã –æ—Ç–±–∏—Ç—ã
                if (this.battlePairs.every(pair => pair.defend)) {
                    this.gameMessage = '–í—Å–µ –∫–∞—Ä—Ç—ã –æ—Ç–±–∏—Ç—ã!';
                    setTimeout(() => {
                        // –ò–ì–†–û–ö –û–¢–ë–ò–õ–°–Ø ‚Üí –•–û–î–ò–¢ –ö–û–ú–ü–¨–Æ–¢–ï–†
                        this.completeRound(false);
                    }, 1000);
                } else {
                    this.gameMessage = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∑–∞—â–∏—â–∞—Ç—å—Å—è';
                }
                
                this.drawCards();
                this.deckCount = this.deck.length;
            }
        },

        throwCard() {
            if (this.selectedCardIndex === null) return;
            
            const card = this.playerCards[this.selectedCardIndex];
            this.battlePairs.push({ attack: card, defend: null });
            this.playerCards.splice(this.selectedCardIndex, 1);
            this.selectedCardIndex = null;
            this.canThrowCards = [];
            
            this.currentAttacker = 'computer';
            this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞—â–∏—â–∞–µ—Ç—Å—è...';
            
            setTimeout(() => {
                this.computerDefend();
            }, 1500);
        },

        takeCards() {
            // –ò–≥—Ä–æ–∫ –±–µ—Ä–µ—Ç –≤—Å–µ –∫–∞—Ä—Ç—ã —Å –ø–æ–ª—è
            const allCards = [];
            this.battlePairs.forEach(pair => {
                allCards.push(pair.attack);
                if (pair.defend) {
                    allCards.push(pair.defend);
                }
            });
            
            this.playerCards.push(...allCards);
            this.battlePairs = [];
            
            // –ò–ì–†–û–ö –í–ó–Ø–õ –ö–ê–†–¢–´ ‚Üí –•–û–î–ò–¢ –ö–û–ú–ü–¨–Æ–¢–ï–†
            this.currentAttacker = 'computer';
            this.gameMessage = '–í—ã –≤–∑—è–ª–∏ –∫–∞—Ä—Ç—ã. –•–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞';
            this.selectedCardIndex = null;
            this.canThrowCards = [];
            
            this.drawCards();
            this.deckCount = this.deck.length;
            
            setTimeout(() => {
                this.computerAttack();
            }, 2000);
        },

        passMove() {
            // "–ë–∏—Ç–æ" - –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ
            this.battlePairs = [];
            
            // –ò–ì–†–û–ö –û–¢–ë–ò–õ–°–Ø ‚Üí –•–û–î–ò–¢ –ö–û–ú–ü–¨–Æ–¢–ï–†
            this.currentAttacker = 'computer';
            this.gameMessage = '–ë–∏—Ç–æ! –•–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞';
            this.selectedCardIndex = null;
            this.canThrowCards = [];
            
            this.drawCards();
            this.deckCount = this.deck.length;
            
            setTimeout(() => {
                this.computerAttack();
            }, 1500);
        },

        computerDefend() {
            const undefendedPair = this.battlePairs.find(pair => !pair.defend);
            if (!undefendedPair) {
                // –ö–û–ú–ü–¨–Æ–¢–ï–† –û–¢–ë–ò–õ–°–Ø ‚Üí –•–û–î–ò–¢ –ö–û–ú–ü–¨–Æ–¢–ï–†
                this.completeRound(true);
                return;
            }

            // –ò—â–µ–º –∫–∞—Ä—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã
            const defendingCard = this.findDefendingCard(undefendedPair.attack);
            
            if (defendingCard) {
                const index = this.computerCards.indexOf(defendingCard);
                undefendedPair.defend = defendingCard;
                this.computerCards.splice(index, 1);
                
                if (this.battlePairs.every(pair => pair.defend)) {
                    this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–±–∏–ª—Å—è!';
                    setTimeout(() => {
                        // –ö–û–ú–ü–¨–Æ–¢–ï–† –û–¢–ë–ò–õ–°–Ø ‚Üí –•–û–î–ò–¢ –ö–û–ú–ü–¨–Æ–¢–ï–†
                        this.completeRound(true);
                    }, 1000);
                } else {
                    this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∑–∞—â–∏—â–∞—Ç—å—Å—è...';
                    setTimeout(() => {
                        this.computerDefend();
                    }, 1500);
                }
            } else {
                // –ö–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–±–∏—Ç—å—Å—è - –±–µ—Ä–µ—Ç –∫–∞—Ä—Ç—ã
                this.computerTakeCards();
            }
            
            this.drawCards();
            this.deckCount = this.deck.length;
        },

        computerAttack() {
            if (this.computerCards.length === 0) {
                this.checkGameOver();
                return;
            }

            let attackCard;
            if (this.battlePairs.length === 0) {
                // –ü–µ—Ä–≤–∞—è –∞—Ç–∞–∫–∞ - —Å–∞–º–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è –∫–∞—Ä—Ç–∞
                attackCard = this.getSmallestCard(this.computerCards);
            } else {
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ - –∫–∞—Ä—Ç—ã —Ç–æ–≥–æ –∂–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞, —á—Ç–æ –Ω–∞ —Å—Ç–æ–ª–µ
                const tableValues = this.getAllTableValues();
                attackCard = this.computerCards.find(card => 
                    tableValues.includes(card.value)
                );
            }

            if (attackCard) {
                const index = this.computerCards.indexOf(attackCard);
                this.battlePairs.push({ attack: attackCard, defend: null });
                this.computerCards.splice(index, 1);
                this.currentAttacker = 'player'; // –¢–µ–ø–µ—Ä—å –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –∑–∞—â–∏—â–∞—Ç—å—Å—è
                this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –∞—Ç–∞–∫–æ–≤–∞–ª! –í–∞—à–∞ –∑–∞—â–∏—Ç–∞';
                
                // –ü–æ—Å–ª–µ –∞—Ç–∞–∫–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –¥–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫—É –∑–∞—â–∏—â–∞—Ç—å—Å—è
                this.drawCards();
                this.deckCount = this.deck.length;
            } else {
                // –ö–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–∏–Ω—É—Ç—å - –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ö–æ–¥
                // –ö–û–ú–ü–¨–Æ–¢–ï–† –ó–ê–ö–û–ù–ß–ò–õ –ê–¢–ê–ö–£ ‚Üí –•–û–î–ò–¢ –ò–ì–†–û–ö
                this.completeRound(false);
            }
        },

        findDefendingCard(attackingCard) {
            return this.computerCards.find(card => 
                this.canDefendWith(card, attackingCard)
            );
        },

        computerTakeCards() {
            const allCards = [];
            this.battlePairs.forEach(pair => {
                allCards.push(pair.attack);
                if (pair.defend) {
                    allCards.push(pair.defend);
                }
            });
            
            this.computerCards.push(...allCards);
            this.battlePairs = [];
            
            // –ö–û–ú–ü–¨–Æ–¢–ï–† –í–ó–Ø–õ –ö–ê–†–¢–´ ‚Üí –•–û–î–ò–¢ –ò–ì–†–û–ö
            this.currentAttacker = 'player';
            this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –≤–∑—è–ª –∫–∞—Ä—Ç—ã. –í–∞—à —Ö–æ–¥';
            
            this.drawCards();
            this.deckCount = this.deck.length;
        },

        completeRound(computerDefended) {
            this.battlePairs = [];
            
            // –õ–û–ì–ò–ö–ê –°–ú–ï–ù–´ –•–û–î–ê:
            if (computerDefended) {
                // –ö–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–±–∏–ª—Å—è ‚Üí —Ö–æ–¥–∏—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä
                this.currentAttacker = 'computer';
                this.gameMessage = '–ö–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–±–∏–ª—Å—è! –ï–≥–æ —Ö–æ–¥';
            } else {
                // –ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞–∫–æ–Ω—á–∏–ª –∞—Ç–∞–∫—É ‚Üí —Ö–æ–¥–∏—Ç –∏–≥—Ä–æ–∫
                this.currentAttacker = 'player';
                this.gameMessage = '–í–∞—à —Ö–æ–¥!';
            }
            
            this.drawCards();
            this.deckCount = this.deck.length;
            this.checkGameOver();
            
            if (!this.gameOver && this.currentAttacker === 'computer') {
                setTimeout(() => {
                    this.computerAttack();
                }, 1500);
            }
        },

        getSmallestCard(cards) {
            if (cards.length === 0) return null;
            return cards.reduce((smallest, card) => {
                return this.getCardValue(card) < this.getCardValue(smallest) ? card : smallest;
            });
        },

        drawCards() {
            // –î–æ–±–æ—Ä –∫–∞—Ä—Ç –∏–∑ –∫–æ–ª–æ–¥—ã
            while (this.playerCards.length < 6 && this.deck.length > 0) {
                this.playerCards.push(this.deck.pop());
            }
            while (this.computerCards.length < 6 && this.deck.length > 0) {
                this.computerCards.push(this.deck.pop());
            }
        },

        checkGameOver() {
            if (this.playerCards.length === 0 && this.deck.length === 0) {
                this.gameOver = true;
                this.gameMessage = 'üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! üéâ';
            } else if (this.computerCards.length === 0 && this.deck.length === 0) {
                this.gameOver = true;
                this.gameMessage = 'üíª –ö–æ–º–ø—å—é—Ç–µ—Ä –≤—ã–∏–≥—Ä–∞–ª!';
            }
        }
    }
});
    </script>
</body>
</html>