<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–∑–∏–Ω–æ –û–ª–∏–º–ø—É—Å - –°–ª–æ—Ç—ã 9x9</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0a0a2a 0%, #1a1a3a 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            border: 2px solid #c5a151;
        }
        
        .logo {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            color: #c5a151;
            text-shadow: 0 0 10px rgba(197, 161, 81, 0.7);
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #aaa;
            font-size: 1.2rem;
        }
        
        .player-info {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        
        .balance {
            font-size: 1.5rem;
            color: #4CAF50;
        }
        
        .bonus-info {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .free-spins {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .bet-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .bet-amount {
            font-size: 1.3rem;
            color: #c5a151;
            min-width: 120px;
        }
        
        button {
            background: #c5a151;
            color: #000;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #d4b15e;
            transform: scale(1.05);
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .game-area {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 30px;
        }
        
        .slot-machine {
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #c5a151;
        }
        
        .slot-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 5px;
            margin: 20px auto;
            max-width: 900px;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
            position: relative;
        }
        
        .slot-cell {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(197, 161, 81, 0.3);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            transition: all 0.3s;
        }
        
        .slot-cell.win {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
            animation: pulse 1s infinite;
        }
        
        .slot-cell.scatter {
            background: rgba(255, 215, 0, 0.3);
            border-color: #FFD700;
        }
        
        .slot-cell.wild {
            background: rgba(156, 39, 176, 0.3);
            border-color: #9C27B0;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .spin-controls {
            margin-top: 30px;
        }
        
        .spin-btn {
            font-size: 1.5rem;
            padding: 15px 50px;
            background: linear-gradient(135deg, #c5a151, #e6c87e);
            margin: 10px;
        }
        
        .auto-spin-btn {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
        }
        
        .bonus-features {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .bonus-btn {
            background: linear-gradient(135deg, #FF5722, #FF9800);
        }
        
        .win-lines {
            margin-top: 30px;
        }
        
        .lines-control {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .line-count {
            font-size: 1.2rem;
            color: #c5a151;
        }
        
        .lines-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .line-preview {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .line-preview.active {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }
        
        .info-panel {
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 15px;
        }
        
        .results {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }
        
        .win-display {
            font-size: 1.8rem;
            color: #FFD700;
            text-shadow: 0 0 10px #FFD700;
            margin: 10px 0;
        }
        
        .paytable {
            margin-top: 20px;
        }
        
        .paytable-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .paytable-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .paytable-symbol {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .paytable-multiplier {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .bonus-feature {
            background: linear-gradient(135deg, #9C27B0, #673AB7);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 10px #9C27B0; }
            50% { box-shadow: 0 0 20px #673AB7; }
            100% { box-shadow: 0 0 10px #9C27B0; }
        }
        
        .history {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .history-item {
            padding: 10px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
        }
        
        .win {
            color: #4CAF50;
        }
        
        .loss {
            color: #f44336;
        }
        
        @media (max-width: 1200px) {
            .game-area {
                grid-template-columns: 1fr;
            }
            
            .slot-cell {
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .player-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .slot-cell {
                width: 35px;
                height: 35px;
                font-size: 1.5rem;
            }
            
            .logo {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <header>
            <h1 class="logo">OLYMPUS MEGASLOTS</h1>
            <p class="subtitle">9x9 —Å–µ—Ç–∫–∞, 50 –ª–∏–Ω–∏–π –≤—ã–ø–ª–∞—Ç, –±–æ–Ω—É—Å–Ω—ã–µ –≤—Ä–∞—â–µ–Ω–∏—è</p>
        </header>
        
        <div class="player-info">
            <div>
                <h3>–ò–≥—Ä–æ–∫: –ì–µ—Ä–æ–π –û–ª–∏–º–ø–∞</h3>
                <div class="balance">–ë–∞–ª–∞–Ω—Å: {{ formatCurrency(balance) }}</div>
            </div>
            
            <div class="bonus-info">
                <div v-if="freeSpins > 0" class="free-spins">
                    üéÅ {{ freeSpins }} –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≤—Ä–∞—â–µ–Ω–∏–π
                </div>
                <div class="total-bet">
                    –û–±—â–∞—è —Å—Ç–∞–≤–∫–∞: {{ formatCurrency(totalBet) }}
                </div>
            </div>
            
            <div class="bet-control">
                <button @click="changeBet(-10)" :disabled="bet <= 10">-10</button>
                <button @click="changeBet(-1)" :disabled="bet <= 1">-1</button>
                <div class="bet-amount">–°—Ç–∞–≤–∫–∞/–ª–∏–Ω–∏—è: {{ formatCurrency(bet) }}</div>
                <button @click="changeBet(1)">+1</button>
                <button @click="changeBet(10)">+10</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="slot-machine">
                <div class="slot-grid">
                    <div 
                        v-for="(cell, index) in grid" 
                        :key="index"
                        class="slot-cell"
                        :class="{
                            win: winningCells.includes(index),
                            scatter: cell.type === 'scatter',
                            wild: cell.type === 'wild'
                        }"
                    >
                        {{ cell.symbol }}
                    </div>
                </div>
                
                <div class="spin-controls">
                    <button 
                        class="spin-btn" 
                        @click="spin" 
                        :disabled="isSpinning || balance < totalBet"
                    >
                        {{ isSpinning ? '–ö–†–£–¢–ò–ú...' : freeSpins > 0 ? `–ë–ï–°–ü–õ–ê–¢–ù–û–ï (${freeSpins})` : '–ö–†–£–¢–ò–¢–¨' }}
                    </button>
                    <button 
                        class="spin-btn auto-spin-btn" 
                        @click="toggleAutoSpin"
                    >
                        {{ autoSpinCount > 0 ? `–ê–í–¢–û (${autoSpinCount})` : '–ê–í–¢–û–°–ü–ò–ù' }}
                    </button>
                </div>
                
                <div class="win-lines">
                    <div class="lines-control">
                        <button @click="changeLines(-5)" :disabled="activeLines <= 5">-5</button>
                        <div class="line-count">–õ–∏–Ω–∏–∏: {{ activeLines }}/50</div>
                        <button @click="changeLines(5)" :disabled="activeLines >= 50">+5</button>
                        <button @click="activeLines = 50">–ú–ê–ö–°</button>
                    </div>
                    
                    <div class="lines-preview">
                        <div 
                            v-for="(line, index) in winLines.slice(0, 20)" 
                            :key="index"
                            class="line-preview"
                            :class="{ active: index < activeLines }"
                            @click="toggleLine(index)"
                            :title="`–õ–∏–Ω–∏—è ${index + 1}: ${line.name}`"
                        >
                            L{{ index + 1 }}
                        </div>
                    </div>
                </div>
                
                <div v-if="lastWin > 0" class="results">
                    <div class="win-display">–í–´–ò–ì–†–´–®: {{ formatCurrency(lastWin) }}!</div>
                    <div v-if="winningLines.length > 0">
                        –í—ã–∏–≥—Ä—ã—à–Ω—ã–µ –ª–∏–Ω–∏–∏: {{ winningLines.map(l => l + 1).join(', ') }}
                    </div>
                </div>
                
                <div v-if="bonusActive" class="bonus-feature">
                    <h2>üéÅ –ë–û–ù–£–°–ù–´–ô –†–ê–£–ù–î! üéÅ</h2>
                    <p>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤—Ä–∞—â–µ–Ω–∏—è: {{ freeSpins }}</p>
                    <p>–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x{{ bonusMultiplier }}</p>
                </div>
            </div>
            
            <div class="info-panel">
                <div class="paytable">
                    <h3>–¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç (–∑–∞ 5+ —Å–∏–º–≤–æ–ª–æ–≤)</h3>
                    <div class="paytable-grid">
                        <div class="paytable-item" v-for="symbol in paytable" :key="symbol.symbol">
                            <div class="paytable-symbol">{{ symbol.symbol }}</div>
                            <div>{{ symbol.name }}</div>
                            <div class="paytable-multiplier">x{{ symbol.multiplier5 }}</div>
                        </div>
                    </div>
                    <p style="margin-top: 10px; color: #FFD700;">
                        ‚ö° = x100 (–¥–∂–µ–∫–ø–æ—Ç), üíé = –ë–æ–Ω—É—Å, üåü = –î–∏–∫–∏–π —Å–∏–º–≤–æ–ª
                    </p>
                </div>
                
                <div class="history">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</h3>
                    <div v-for="(item, index) in history" :key="index" class="history-item">
                        <span>{{ item.time }}</span>
                        <span :class="item.win > 0 ? 'win' : 'loss'">
                            {{ item.win > 0 ? '+' + formatCurrency(item.win) : formatCurrency(item.bet) }}
                        </span>
                        <span v-if="item.lines">[{{ item.lines }} –ª–∏–Ω.]</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        
        createApp({
            setup() {
                // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
                const balance = ref(1000);
                const bet = ref(1);
                const activeLines = ref(20);
                const grid = ref([]);
                const isSpinning = ref(false);
                const history = ref([]);
                const lastWin = ref(0);
                const winningCells = ref([]);
                const winningLines = ref([]);
                const freeSpins = ref(0);
                const bonusMultiplier = ref(1);
                const bonusActive = ref(false);
                const autoSpinCount = ref(0);
                
                // –°–∏–º–≤–æ–ª—ã
                const symbols = [
                    { symbol: '‚ö°', type: 'high', name: '–ó–µ–≤—Å' },
                    { symbol: 'ü¶â', type: 'high', name: '–ê—Ñ–∏–Ω–∞' },
                    { symbol: 'üåä', type: 'high', name: '–ü–æ—Å–µ–π–¥–æ–Ω' },
                    { symbol: 'üèõÔ∏è', type: 'medium', name: '–ü–∞—Ä—Ñ–µ–Ω–æ–Ω' },
                    { symbol: '‚öîÔ∏è', type: 'medium', name: '–ê—Ä–µ—Å' },
                    { symbol: 'üõ°Ô∏è', type: 'medium', name: '–ì–µ—Ä–∞' },
                    { symbol: 'üè∫', type: 'low', name: '–î–∏–æ–Ω–∏—Å' },
                    { symbol: 'üî•', type: 'low', name: '–ì–µ—Ñ–µ—Å—Ç' },
                    { symbol: 'üíé', type: 'scatter', name: '–ë–æ–Ω—É—Å' },
                    { symbol: 'üåü', type: 'wild', name: '–î–∏–∫–∏–π' }
                ];
                
                // –¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç
                const paytable = [
                    { symbol: '‚ö°', name: '–ó–µ–≤—Å', multiplier3: 5, multiplier4: 15, multiplier5: 100 },
                    { symbol: 'ü¶â', name: '–ê—Ñ–∏–Ω–∞', multiplier3: 4, multiplier4: 12, multiplier5: 75 },
                    { symbol: 'üåä', name: '–ü–æ—Å–µ–π–¥–æ–Ω', multiplier3: 3, multiplier4: 10, multiplier5: 50 },
                    { symbol: 'üèõÔ∏è', name: '–ü–∞—Ä—Ñ–µ–Ω–æ–Ω', multiplier3: 2, multiplier4: 8, multiplier5: 30 },
                    { symbol: '‚öîÔ∏è', name: '–ê—Ä–µ—Å', multiplier3: 2, multiplier4: 6, multiplier5: 25 },
                    { symbol: 'üõ°Ô∏è', name: '–ì–µ—Ä–∞', multiplier3: 1, multiplier4: 5, multiplier5: 20 },
                    { symbol: 'üè∫', name: '–î–∏–æ–Ω–∏—Å', multiplier3: 1, multiplier4: 4, multiplier5: 15 },
                    { symbol: 'üî•', name: '–ì–µ—Ñ–µ—Å—Ç', multiplier3: 1, multiplier4: 3, multiplier5: 10 },
                    { symbol: 'üíé', name: '–ë–æ–Ω—É—Å', multiplier3: 3, multiplier4: 10, multiplier5: 25 },
                    { symbol: 'üåü', name: '–î–∏–∫–∏–π', multiplier3: 5, multiplier4: 20, multiplier5: 50 }
                ];
                
                // –õ–∏–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç (50 –ª–∏–Ω–∏–π –¥–ª—è —Å–µ—Ç–∫–∏ 9x9)
                const winLines = [
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 1", pattern: [0,1,2,3,4,5,6,7,8] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 2", pattern: [9,10,11,12,13,14,15,16,17] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 3", pattern: [18,19,20,21,22,23,24,25,26] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 4", pattern: [27,28,29,30,31,32,33,34,35] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 5", pattern: [36,37,38,39,40,41,42,43,44] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 6", pattern: [45,46,47,48,49,50,51,52,53] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 7", pattern: [54,55,56,57,58,59,60,61,62] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 8", pattern: [63,64,65,66,67,68,69,70,71] },
                    { name: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å 9", pattern: [72,73,74,75,76,77,78,79,80] },
                    { name: "–î–∏–∞–≥–æ–Ω–∞–ª—å 1", pattern: [0,10,20,30,40,50,60,70,80] },
                    { name: "–î–∏–∞–≥–æ–Ω–∞–ª—å 2", pattern: [8,16,24,32,40,48,56,64,72] },
                    { name: "V-–æ–±—Ä–∞–∑–Ω–∞—è 1", pattern: [0,9,18,27,36,45,54,63,72] },
                    { name: "V-–æ–±—Ä–∞–∑–Ω–∞—è 2", pattern: [8,17,26,35,44,53,62,71,80] },
                    { name: "–ó–∏–≥–∑–∞–≥ 1", pattern: [0,1,10,19,28,37,46,55,64] },
                    { name: "–ó–∏–≥–∑–∞–≥ 2", pattern: [8,7,16,25,34,43,52,61,70] },
                    { name: "W-–æ–±—Ä–∞–∑–Ω–∞—è 1", pattern: [0,9,10,19,28,29,38,47,56] },
                    { name: "W-–æ–±—Ä–∞–∑–Ω–∞—è 2", pattern: [8,17,16,25,34,33,42,51,60] },
                    { name: "M-–æ–±—Ä–∞–∑–Ω–∞—è 1", pattern: [72,63,64,55,46,45,36,27,18] },
                    { name: "M-–æ–±—Ä–∞–∑–Ω–∞—è 2", pattern: [80,71,70,61,52,51,42,33,24] },
                    { name: "–ö—Ä–µ—Å—Ç 1", pattern: [0,10,20,30,40,30,20,10,0] },
                    { name: "–ö—Ä–µ—Å—Ç 2", pattern: [8,16,24,32,40,32,24,16,8] },
                    { name: "–î–≤–æ–π–Ω–æ–π –∑–∏–≥–∑–∞–≥", pattern: [4,13,22,31,40,49,58,67,76] },
                    { name: "–û–±—Ä–∞—Ç–Ω—ã–π –∑–∏–≥–∑–∞–≥", pattern: [76,67,58,49,40,31,22,13,4] },
                    { name: "–ü–∏—Ä–∞–º–∏–¥–∞", pattern: [0,9,18,27,36,45,54,63,72,73,74,75,76,77,78,79,80] },
                    { name: "–†–æ–º–±", pattern: [4,13,22,31,40,49,58,67,76,67,58,49,40,31,22,13,4] }
                ];
                
                // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ –ª–∏–Ω–∏–π –¥–æ 50
                for (let i = winLines.length; i < 50; i++) {
                    const pattern = Array.from({length: 9}, (_, j) => {
                        const row = j;
                        const col = Math.floor(Math.random() * 9);
                        return row * 9 + col;
                    });
                    winLines.push({ 
                        name: `–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è ${i + 1}`, 
                        pattern: pattern 
                    });
                }
                
                // –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                const totalBet = computed(() => bet.value * activeLines.value);
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã
                const formatCurrency = (amount) => {
                    return amount.toFixed(2) + ' ‚ÇΩ';
                };
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
                const changeBet = (amount) => {
                    const newBet = bet.value + amount;
                    if (newBet >= 1 && newBet <= 100) {
                        bet.value = newBet;
                    }
                };
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∏–Ω–∏–π
                const changeLines = (amount) => {
                    const newLines = activeLines.value + amount;
                    if (newLines >= 1 && newLines <= 50) {
                        activeLines.value = newLines;
                    }
                };
                
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ª–∏–Ω–∏–∏
                const toggleLine = (index) => {
                    if (index < activeLines.value) {
                        activeLines.value = index;
                    } else {
                        activeLines.value = index + 1;
                    }
                };
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∫–∏
                const initializeGrid = () => {
                    const newGrid = [];
                    for (let i = 0; i < 81; i++) {
                        const randomSymbol = symbols[Math.floor(Math.random() * 8)];
                        newGrid.push({
                            symbol: randomSymbol.symbol,
                            type: randomSymbol.type
                        });
                    }
                    grid.value = newGrid;
                };
                
                // –°–ª—É—á–∞–π–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ç–∫–∏
                const randomizeGrid = () => {
                    return grid.value.map(() => {
                        const rand = Math.random();
                        if (rand < 0.02) return { symbol: 'üíé', type: 'scatter' };
                        if (rand < 0.05) return { symbol: 'üåü', type: 'wild' };
                        return symbols[Math.floor(Math.random() * 8)];
                    });
                };
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö –ª–∏–Ω–∏–π
                const checkWinLines = (grid) => {
                    const wins = [];
                    const winningCellsSet = new Set();
                    let totalWin = 0;
                    
                    for (let lineIndex = 0; lineIndex < activeLines.value; lineIndex++) {
                        const line = winLines[lineIndex].pattern;
                        let firstSymbol = null;
                        let count = 0;
                        
                        for (let i = 0; i < line.length; i++) {
                            const cellIndex = line[i];
                            const cell = grid[cellIndex];
                            
                            // –î–∏–∫–∏–π —Å–∏–º–≤–æ–ª –∑–∞–º–µ–Ω—è–µ—Ç –ª—é–±–æ–π
                            if (cell.symbol === 'üåü') {
                                if (!firstSymbol && i < line.length - 1) {
                                    firstSymbol = grid[line[i + 1]]?.symbol;
                                }
                                count++;
                                winningCellsSet.add(cellIndex);
                            }
                            // –°–∏–º–≤–æ–ª —Å–æ–≤–ø–∞–¥–∞–µ—Ç
                            else if (!firstSymbol || cell.symbol === firstSymbol) {
                                firstSymbol = cell.symbol;
                                count++;
                                winningCellsSet.add(cellIndex);
                            } else {
                                break;
                            }
                        }
                        
                        if (count >= 3) {
                            const paySymbol = paytable.find(s => s.symbol === firstSymbol);
                            if (paySymbol) {
                                let multiplier = 0;
                                if (count >= 5) multiplier = paySymbol.multiplier5 * bonusMultiplier.value;
                                else if (count >= 4) multiplier = paySymbol.multiplier4 * bonusMultiplier.value;
                                else if (count >= 3) multiplier = paySymbol.multiplier3 * bonusMultiplier.value;
                                
                                if (multiplier > 0) {
                                    const winAmount = bet.value * multiplier;
                                    totalWin += winAmount;
                                    wins.push({ lineIndex, count, symbol: firstSymbol, winAmount });
                                    winningLines.value.push(lineIndex);
                                }
                            }
                        }
                    }
                    
                    return { wins, totalWin, winningCells: Array.from(winningCellsSet) };
                };
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                const checkBonus = (grid) => {
                    const scatterCount = grid.filter(cell => cell.symbol === 'üíé').length;
                    
                    if (scatterCount >= 3) {
                        const freeSpinsAwarded = scatterCount * 5;
                        freeSpins.value += freeSpinsAwarded;
                        bonusActive.value = true;
                        bonusMultiplier.value = scatterCount;
                        
                        return {
                            trigger: true,
                            count: freeSpinsAwarded,
                            multiplier: bonusMultiplier.value
                        };
                    }
                    
                    return { trigger: false };
                };
                
                // –í—Ä–∞—â–µ–Ω–∏–µ
                const spin = () => {
                    if (isSpinning.value || (balance.value < totalBet.value && freeSpins.value === 0)) return;
                    
                    isSpinning.value = true;
                    winningCells.value = [];
                    winningLines.value = [];
                    lastWin.value = 0;
                    
                    // –°–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫—É –µ—Å–ª–∏ –Ω–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤—Ä–∞—â–µ–Ω–∏—è
                    if (freeSpins.value === 0) {
                        balance.value -= totalBet.value;
                    } else {
                        freeSpins.value--;
                    }
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è
                    let spins = 0;
                    const spinInterval = setInterval(() => {
                        grid.value = randomizeGrid();
                        spins++;
                        
                        if (spins >= 10) {
                            clearInterval(spinInterval);
                            setTimeout(() => {
                                finishSpin();
                            }, 500);
                        }
                    }, 100);
                };
                
                // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è
                const finishSpin = () => {
                    const result = checkWinLines(grid.value);
                    const bonusResult = checkBonus(grid.value);
                    
                    let totalWin = result.totalWin;
                    winningCells.value = result.winningCells;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à
                    if (totalWin > 0) {
                        balance.value += totalWin;
                        lastWin.value = totalWin;
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                    const now = new Date();
                    const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                    
                    history.value.unshift({
                        time: timeString,
                        bet: freeSpins.value > 0 ? 0 : totalBet.value,
                        win: totalWin,
                        lines: activeLines.value,
                        bonus: bonusResult.trigger
                    });
                    
                    if (history.value.length > 10) {
                        history.value = history.value.slice(0, 10);
                    }
                    
                    isSpinning.value = false;
                    
                    // –ê–≤—Ç–æ—Å–ø–∏–Ω
                    if (autoSpinCount.value > 0 && balance.value >= totalBet.value) {
                        autoSpinCount.value--;
                        setTimeout(spin, 1000);
                    }
                };
                
                // –ê–≤—Ç–æ—Å–ø–∏–Ω
                const toggleAutoSpin = () => {
                    if (autoSpinCount.value === 0) {
                        autoSpinCount.value = 10;
                        if (!isSpinning.value) {
                            spin();
                        }
                    } else {
                        autoSpinCount.value = 0;
                    }
                };
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
                onMounted(() => {
                    initializeGrid();
                    
                    // –ù–∞—á–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
                    const now = new Date();
                    for (let i = 0; i < 5; i++) {
                        const time = new Date(now.getTime() - i * 600000);
                        const timeString = `${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')}`;
                        
                        history.value.push({
                            time: timeString,
                            bet: 20,
                            win: Math.random() > 0.6 ? Math.floor(Math.random() * 200) + 10 : 0,
                            lines: 20,
                            bonus: Math.random() > 0.8
                        });
                    }
                });
                
                return {
                    balance,
                    bet,
                    activeLines,
                    grid,
                    isSpinning,
                    history,
                    lastWin,
                    winningCells,
                    winningLines,
                    freeSpins,
                    bonusActive,
                    bonusMultiplier,
                    autoSpinCount,
                    totalBet,
                    paytable,
                    winLines,
                    formatCurrency,
                    changeBet,
                    changeLines,
                    toggleLine,
                    spin,
                    toggleAutoSpin
                };
            }
        }).mount('#app');
    </script>
</body>
</html>